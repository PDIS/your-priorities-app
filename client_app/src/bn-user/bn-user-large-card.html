<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/lite-signal/lite-signal.html">

<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">

<link rel="import" href="../../bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../../bower_components/neon-animation/web-animations.html">

<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">

<link rel="import" href="../../bower_components/paper-item/paper-item.html">

<link rel="import" href="../yp-app-globals/yp-app-icons.html">
<link rel="import" href="../yp-behaviors/yp-language-behavior.html">
<link rel="import" href="../yp-behaviors/access-helpers.html">
<link rel="import" href="../yp-behaviors/yp-got-admin-rights-behavior.html">
<link rel="import" href="../yp-behaviors/yp-large-card-behaviors.html">
<link rel="import" href="../yp-behaviors/yp-goto-behavior.html">
<link rel="import" href="../yp-behaviors/yp-truncate-behavior.html">
<link rel="import" href="../yp-behaviors/yp-media-formats-behavior.html">
<link rel="import" href="../yp-magic-text/yp-magic-text.html">

<link rel="import" href="bn-user-stats.html">
<link rel="import" href="bn-user-behaviors.html">

<dom-module id="bn-user-card-large">

  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
      }

      .userAccess {
        padding-bottom: 8px;
      }

      .user-name {
        padding-bottom: 4px;
        margin: 0;
        font-size: 24px;
        font-weight: 700;
      }

      .user-name[admin] {
        padding-right: 16px;
      }

      .objectives {
      }

      .userCard {
        background-color: #fefefe;
        color: #333;
        height: 243px;
        width: 432px;
        padding: 0 !important;
        margin-top: 0 !important;
      }

      .stats {
        position: absolute;
        bottom: 0px;
        right: 8px;
      }

      .actions {
        position: absolute;
        bottom: 0px;
        right: 8px;
      }

      .edit {
        color: #FFF;
        position: absolute;
        top: 0;
        left: 384px;
        padding-right: 0;
        margin-right: 0;
      }

      .description-and-stats {
        width: 100%;
      }

      .newCategory {
        color: var(--primary-background-color, #F2F2F2);
        position: absolute;
        top: 64px;
        right: 0;
      }

      iron-image, video {
        width: 432px;
        height: 243px;
      }

      .description {
        padding: 0;
        margin: 0;
      }

      .userDescription {
        padding-left: 16px;
        padding-right: 16px;
        padding-top: 8px;
        font-size: var(--user-description-font-size, 16px);
      }

      .userTags {
        padding-left: 16px;
        padding-right: 16px;
        font-size: var(--user-description-font-size, 16px);
        padding-top: 16px;
        padding-bottom: 0px;
      }

      .userCreator {

      }

      .user-name {
        background-color: var(--primary-color-800, #000);
        color: #fafafa;
        padding-left: 16px;
        padding-top: 16px;
        padding-bottom: 16px;
        padding-right: 32px !important;
        min-height: 28px;
      }

      .textBox {
        margin-left: 32px;
        position: relative;
      }

      @media (max-width: 945px) {
        :host {
          width: 306px;
        }

        .userCard {
          margin-bottom: 16px;
          width: 306px;
          height: 100%;
        }

        .top-card {
          margin-top: 16px !important;
        }

        .edit {
          left: 265px;
        }

        iron-image, video {
          width: 306px;
          height: 172px !important;
        }

        .imageCard {
          height: 172px !important;
        }

        .user-name {
          font-size: 20px;
          min-height: 24px;
        }

        .userDescription {
          padding-top: 4px;
          padding-bottom: 42px;
        }

        .stats {
        }

        .textBox {
          margin-left: 0;
        }
      }

      [hidden] {
        display: none !important;
      }

      a {
        text-decoration: none;
        color: inherit;
      }
    </style>
    <lite-signal on-lite-signal-yp-language="_languageEvent"></lite-signal>
    <lite-signal on-lite-signal-yp-pause-video="_pauseVideo"></lite-signal>

    <div class="layout horizontal center-center wrap">
      <paper-material id="card" elevation="3" animated-shadow class="userCard textBox">
        <div class="layout vertical">
          <div class="layout horizontal wrap">
            <div class="layout vertical description-and-stats">
              <div class="description">
                <div class="user-name">
                  <div id="userName">[[user.name]]</div>
                  <a href="/somewhere-to-the-user-page">[[t(from)]] [[user.user_name]]</a>
                </div>
                <yp-magic-text id="tags" class="userTags"
                               text-type="userContent" content-language="[[user.language]]"
                               content="[[userTags]]" content-id="[[user.id]]">
                </yp-magic-text>
                <yp-magic-text id="objectives" class="userDescription"
                               text-type="userContent" content-language="[[user.language]]"
                               content="[[user.objectives]]" content-id="[[user.id]]">

                </yp-magic-text>
              </div>
            </div>
          </div>
          <bn-news-actions class="actions" user="[[user]]"></bn-news-actions>
        </div>
      </paper-material>
    </div>
  </template>

  <script>
    Polymer({
      is: 'bn-user-card-large',

      behaviors: [
        Polymer.ypLanguageBehavior,
        Polymer.UserBehaviors,
        Polymer.LargeCardBehaviors,
        Polymer.AccessHelpers,
        Polymer.ypGotAdminRightsBehavior,
        Polymer.ypGotoBehavior,
        Polymer.ypTruncateBehavior,
        Polymer.ypMediaFormatsBehavior
      ],

      properties: {
        user: {
          type: Object,
          observer: '_userChanged'
        },
      },

      _userChanged: function (user) {
        if (user && user.objectives && user.objectives.length > 220) {
          this.$$("#objectives").style.fontSize = "15px";
        } else {
          this.$$("#objectives").style.fontSize = "16px";
        }
      },

      _refresh: function (user) {
        if (user) {
          this.set('user', user);
        }
        this.fire("update-user");
      }
    });
  </script>
</dom-module>
