<div hidden="" by-polymer-bundler=""><dom-module id="bn-page" assetpath="../bn-page/"><template><style include="iron-flex iron-flex-alignment">:host{@apply --layout-vertical;height:100%;width:100%}.mainArea{background-color:var(--primary-background-color);height:100%;width:100%}.tab-wrapper{min-height:64px}.largeButtonWrapper{min-height:120px}.middleArea{background-color:var(--primary-color-600)}.createFab{position:fixed;bottom:24px;right:28px;background-color:var(--accent-color);color:#FFF;--paper-fab-iron-icon:{color:var(--icon-general-color,#FFF);height:40px;width:40px};}.createFab[wide-layout]{width:72px;height:72px;--paper-fab-iron-icon:{color:var(--icon-general-color,#FFF);width:72px;height:72px};}paper-fab[wide-layout]::shadow #icon{width:40px;height:40px}.tab-wrapper ::slotted(.tabs){width:1100px;padding-top:8px;padding-bottom:8px}.tab-wrapper ::slotted(.tabs .tab){width:250px}@media (max-width:1024px){.tab-wrapper ::slotted(.tabs){max-width:920px}.tab-wrapper ::slotted(.tabs .tab){width:200px}}@media (max-width:945px){.tab-wrapper ::slotted(.tabs){max-width:450px;font-size:13px!important;word-wrap:break-word!important}.tab-wrapper ::slotted(.tabs .tab){width:120px;word-wrap:break-word!important}.tab-wrapper{min-height:60px}.topArea[is-post]{min-height:470px}}@media (max-width:380px){.tab-wrapper ::slotted(.tabs){max-width:330px;font-size:12px!important}.tab-wrapper ::slotted(paper-tab){width:100px}.topArea[is-post]{min-height:530px}.largeButtonWrapper{min-height:80px}}[hidden]{display:none!important}</style><div class="layout vertical mainArea"><template is="dom-if" if="[[hasLargeButton]]"><div class="largeButtonWrapper layout horizontal center-center" hidden$="[[!wideWidth]]"><slot name="largeAddButton"></slot></div></template><div class="tab-wrapper layout horizontal center-center"><slot name="tabs"></slot></div><div class="tab-pages-wrapper layout vertical"><slot name="tabPages"></slot></div></div><div class="create-fab-wrapper layout horizontal end-justified createFabContainer middleArea"><template is="dom-if" if="[[createFabIcon]]"><paper-fab class="createFab" icon="[[createFabIcon]]" elevation="5" wide-layout$="{{wideWidth}}" title="[[createFabTitle]]" on-tap="_createTap"></paper-fab></template></div><iron-media-query query="(min-width: 1024px)" query-matches="{{wideWidth}}"></iron-media-query></template><script>Polymer({is:"bn-page",properties:{wideWidth:{type:Boolean,value:!1},createFabIcon:{type:String,value:null},createFabTitle:{type:String},isPost:{type:Boolean,value:!1},hasLargeButton:{type:Boolean,value:!1}},behaviors:[Polymer.ypLanguageBehavior,Polymer.ypMediaFormatsBehavior],listeners:{"yp-setup-header-image":"_setupTopHeaderImageEvent"},_fabTabChanged:function(e){},_createTap:function(){this.fire("yp-create-fab-tap")}});</script></dom-module><dom-module id="bn-news-card" assetpath="../bn-news/"><template><style include="iron-flex iron-flex-alignment">:host{display:block;@apply --layout-vertical;width:416px}.description{color:var(--primary-color-more-darker,#424242);line-height:var(--description-line-height,1.3)}.groupCard{height:fit-content;background-color:#fff}.objectives{@apply --layout-vertical;color:var(--primary-color-more-darker,#424242);line-height:var(--objectives-line-height,1.3);padding:16px}.actions{position:absolute;bottom:0;right:8px}.group-name[archived]{background-color:#aaa}iron-image[archived]{opacity:.85;filter:alpha(opacity=85)}iron-image{width:416px;height:234px;display:block}bn-news-stats{color:var(--primary-color-more-darker,#424242)}paper-card{background-color:red;vertical-align:text-top}.informationText{vertical-align:text-top}.authorImage{height:60px;width:60px}.group-name{margin:0;font-size:var(--large-heading-size,26px);height:45px;padding:14px;font-weight:700;cursor:pointer;vertical-align:middle;display:table-cell!important;width:416px}.group-name[featured]{font-size:25px;background-color:var(--accent-color)}yp-membership-button[archived]{display:none}yp-membership-button{position:absolute;right:16px;top:214px;width:32px;height:32px;color:var(--icon-general-color,#FFF)}.objectives{padding:8px}.editors{padding:8px 8px 8px 14px}@media (max-width:420px){:host{width:304px}.groupCard{margin-left:0;margin-right:8px;padding-left:0;padding-right:0;width:304px}iron-image{width:304px;height:165px}.group-name{width:304px}}.withPointer{cursor:pointer}[hidden]{display:none!important}#author_name{font-weight:700}#newInformation,#trust_rate,.groupTags{padding:10px}#trust_rate{font-weight:700}.indicator{width:36px;height:36px;position:absolute;top:43%}.trustBar{width:50%;height:5px;background-color:#20b2aa}</style><iron-media-query query="(min-width: 600px)" query-matches="{{wide}}"></iron-media-query><template is="dom-if" if="[[group]]"><paper-card class="groupCard" animated="" elevation="[[elevation]]"><div><template is="dom-if" if="[[noImage]]"><iron-image header-mode$="[[headerMode]]" archived$="[[archived]]" sizing="cover" class="main-image withPointer cardImage" src="https://i.imgur.com/sdsFAoT.png" on-tap="_goToGroup"></iron-image></template><template is="dom-if" if="[[!noImage]]"><iron-image archived$="[[archived]]" class="logo withPointer cardImage" sizing="cover" on-tap="_goToGroup" preload="" src="[[groupLogoImagePath]]"></iron-image></template><svg class="indicator" xmlns="http://www.w3.org/2000/svg" fill="#20B2AA" width="24" height="24" viewBox="0 0 24 24"><path d="M12 2c3.86 0 7 3.14 7 7 0 5.25-7 13-7 13S5 14.25 5 9c0-3.86 3.14-7 7-7zm-1.53 12L17 7.41 15.6 6l-5.13 5.18L8.4 9.09 7 10.5l3.47 3.5z"></path><path fill="none" d="M0 0h24v24H0V0z"></path></svg><div class="trustBar"></div></div><table id="newInformation"><tbody><tr><td rowspan="2"><img class="authorImage" id="author_image"></td><td><div id="groupName" class="group-name" archived$="[[archived]]" featured$="[[featured]]" on-tap="_goToGroup"><yp-magic-text text-type="groupName" content-language="[[group.language]]" disable-translation="[[group.configuration.disableNameAutoTranslation]]" text-only="" content="[[groupName]]" content-id="[[group.id]]"></yp-magic-text><span hidden$="[[!archived]]">- [[t('archived')]]</span></div></td></tr><tr><td><div class="editors"><span>[[t('group.author_is')]]</span> <a id="author_name" href="/user/[[group.user_id]]">...</a> <span>| </span><span>[[groupCollaborators]]</span> <span>[[t('group.collaborators')]]</span></div></td></tr></tbody></table><yp-magic-text id="tags" class="groupTags" text-type="groupContent" content-language="[[group.language]]" content="[[groupTags]]" content-id="[[group.id]]"></yp-magic-text><div id="trust_rate"><span class="trustRate">50%</span> <span>[[t('group.trust_rate')]]</span></div><bn-news-actions class="actions" group="[[group]]"></bn-news-actions></paper-card></template></template><script>Polymer({is:"bn-news-card",behaviors:[Polymer.ypLanguageBehavior,Polymer.GroupBehaviors,Polymer.ypTruncateBehavior,Polymer.ypMediaFormatsBehavior,Polymer.ypGotoBehavior],properties:{groupCollaborators:{type:Number,value:200}},ready:function(){}});</script></dom-module><dom-module id="bn-news-grid" assetpath="../bn-news/"><template><style include="iron-flex iron-flex-alignment">.groupCard{padding:0;padding-top:16px}.groupCard[wide-padding]{padding:16px!important}[hidden]{display:none!important}:focus{outline:0}</style><lite-signal on-lite-signal-yp-language="_languageEvent"></lite-signal><iron-media-query query="(min-width: 600px)" query-matches="{{wide}}"></iron-media-query><div class="layout vertical center-center"><iron-list id="ironList" scroll-offset="350" items="[[activeGroups]]" as="group" scroll-target="document" grid=""><template><div class="groupCard" tabindex$="[[tabIndex]]" wide-padding$="[[wide]]"><bn-news-card wide-padding$="[[wide]]" group="[[group]]" on-mouseover="cardMouseOver" on-mouseout="cardMouseOut"></bn-news-card></div></template></iron-list></div></template><script>Polymer({is:"bn-news-grid",behaviors:[Polymer.ypLanguageBehavior,Polymer.ypIronListBehavior,Polymer.ypCardMouseBehavior],properties:{featuredGroups:Array,archivedGroups:Array,activeGroups:Array,hideAdd:{type:Boolean,value:!1},wide:{type:Boolean,value:!1}},_newGroup:function(){this.fire("add-new-group")}});</script></dom-module></div><dom-module id="bn-home"><template><style include="iron-flex iron-flex-alignment">.card-container{@apply --layout-horizontal;@apply --layout-wrap;}.card{padding:16px}.tab-wrapper{display:none}yp-ajax{background-color:var(--primary-background-color)!important}.archivedText{font-size:26px;color:#333}.minHeightSection{min-height:450px}#paper_tabs[apple]{margin-top:42px;margin-bottom:8px}[hidden]{display:none!important}</style><bn-page id="page" create-fab-icon="[[createFabIcon]]" create-fab-title="[[t('group.add')]]" on-yp-create-fab-tap="_newGroup"><iron-pages class="tabPages" slot="tabPages" selected="{{selectedTab}}" attr-for-selected="name" entry-animation="fade-in-animation" exit-animation="fade-out-animation"><section name="groups"><div class="layout horizontal center-center wrap"><bn-news-grid featured-groups="[[featuredGroups]]" active-groups="[[activeGroups]]" archived-groups="[[archivedGroups]]" hide-add$="[[!createFabIcon]]" on-add-new-group="_newGroup"></bn-news-grid></div></section><section class="minHeightSection" name="news"><template is="dom-if" if="[[newsTabSelected]]"><ac-activities id="communityNews" selected-tab="[[selectedTab]]" community-id="[[community.id]]"></ac-activities></template></section><section class="minHeightSection" name="map" hidden$="[[locationHidden]]"><template is="dom-if" if="[[mapActive]]" restamp=""><yp-post-map community-id="[[community.id]]"></yp-post-map></template></section></iron-pages></bn-page><lite-signal on-lite-signal-yp-language="_languageEvent"></lite-signal><lite-signal on-lite-signal-logged-in="_userLoggedIn"></lite-signal><lite-signal on-lite-signal-got-admin-rights="_gotAdminRights"></lite-signal><app-route route="{{idRoute}}" pattern="/:id" data="{{idRouteData}}" tail="{{tabRoute}}"></app-route><app-route route="{{tabRoute}}" pattern="/:tabName" data="{{tabRouteData}}"></app-route><yp-ajax id="ajax" url="/api/communities" on-response="_response"></yp-ajax><yp-ajax id="pagesAjax" on-response="_pagesResponse"></yp-ajax></template><script>Polymer({is:"bn-home",behaviors:[Polymer.ypLanguageBehavior,Polymer.GroupCollectionBehaviors,Polymer.ypThemeBehavior,Polymer.CollectionHelpers,Polymer.AccessHelpers,Polymer.YpNewsTabSelected,Polymer.ypLoggedInUserBehavior,Polymer.ypDetectOldiOs,Polymer.ypGotoBehavior,Polymer.ypMediaFormatsBehavior],properties:{idRoute:Object,tabRoute:Object,idRouteData:Object,tabRouteData:Object,createFabIcon:{type:String,value:null,notify:!0},communityId:{type:Number,value:null,observer:"_communityIdChanged"},community:{type:Object},selectedTab:{type:String,value:"groups",observer:"_selectedTabChanged"},mapActive:{type:Boolean,value:!1},locationHidden:{type:Boolean,value:!1},useAlternativeHeader:{type:Boolean,value:!1},isOldiOs:{type:Boolean,computed:"_isOldiOs(communityId)"},useNormalHeader:{type:Boolean,value:!0}},observers:["_routeIdChanged(idRouteData.id)","_routeTabChanged(tabRouteData.tabName)"],listeners:{"yp-new-group":"_newGroup"},_userLoggedIn:function(e){e&&this.community&&window.location.href.indexOf("/community/")>-1&&this.$$("#ajax").generateRequest()},_newPostForGroup:function(e){window.appGlobals.activity("open","newPost"),Polymer.dom(document).querySelector("yp-app").getDialogAsync("postEdit",function(t){t.setup(null,!0,null),t.open("new",{groupId:e.id,group:e})}.bind(this))},_refreshTabsAndPages:function(){this.async(function(){var e=this.$$("#tabPages");e&&e.forceSynchronousItemUpdate();var t=this.$$("#paper_tabs");t&&(t.forceSynchronousItemUpdate(),t.notifyResize())},10)},_routeIdChanged:function(e){e&&this.set("communityId",e)},_routeTabChanged:function(e){e&&this.set("selectedTab",e)},_selectedTabChanged:function(e){this.community&&this.redirectTo("/community/"+this.community.id+"/"+e),"map"==e?this.set("mapActive",!0):this.set("mapActive",!1),e&&window.appGlobals&&window.appGlobals.activity("open","community_tab_"+e),this.async(function(){var e=this.$$("#communityNews");e&&e.fireResize()},300)},_hideEdit:function(){return!this.community||(!window.appUser.loggedIn()||window.appUser.user.id!=this.community.user_id)},_communityHeaderUrl:function(e){return this.getImageFormatUrl(e.CommunityHeaderImages,2)},_communityIdChanged:function(e,t){e&&(this.set("community",null),this.set("featuredGroups",null),this.set("activeGroups",null),this.set("archivedGroups",null),this.set("selectedTab","groups"),this._getCommunity())},_getCommunity:function(){this.$$("#ajax").url="/api/communities/"+this.communityId,this.$$("#ajax").retryMethodAfter401Login=this._getCommunity.bind(this),this.$$("#ajax").generateRequest()},_newGroup:function(){window.appGlobals.activity("open","newGroup"),Polymer.dom(document).querySelector("yp-app").getDialogAsync("groupEdit",function(e){e.setup(null,!0,this._refreshAjax.bind(this)),e.open("new",{communityId:this.communityId,community:this.community})}.bind(this))},_pagesResponse:function(e,t){this.fire("yp-set-pages",t.response)},_response:function(e,t,i){this.set("community",t.response),this.refresh(),this.community.only_admins_can_create_groups&&!this.checkCommunityAccess(this.community)||this.set("createFabIcon","add");this._communityHeaderUrl(this.community);this.setupGroups(this.community.Groups),this._setLocationHidden(this.community.Groups),this.async(function(){var e=this.$$("#communityCard");e&&(e.setElevation(5),e.lowerCardLater())},20)},_gotAdminRights:function(e,t){t&&t>0&&this.checkCommunityAccess(this.community)&&this.set("createFabIcon","add")},_setLocationHidden:function(e){var t=!0;e.forEach(function(e){e.configuration&&e.configuration.locationHidden?1!=e.configuration.locationHidden&&(t=!1):t=!1}.bind(this)),this.set("locationHidden",t),this._refreshTabsAndPages()},refresh:function(){this.community&&(this.fire("yp-set-home-link",{type:"community",id:this.community.id,name:this.community.name}),window.appGlobals.setCommunityAnalyticsTracker(this.community.google_analytics_code),this.community.configuration&&window.appGlobals.setCommunityPixelTracker(this.community.configuration.facebookPixelId),null!=this.community.theme_id?this.setTheme(this.community.theme_id):null!=this.community.Domain.theme_id&&this.setTheme(this.community.Domain.theme_id),null!=this.community.default_locale&&window.appGlobals.changeLocaleIfNeeded(this.community.default_locale),this.community.configuration&&this.community.configuration.alternativeHeader&&""!=this.community.configuration.alternativeHeader?(this.set("useAlternativeHeader",!0),this.set("useNormalHeader",!1)):(this.set("useAlternativeHeader",!1),this.set("useNormalHeader",!0)),this.fire("change-header",{headerTitle:"Home",headerDescription:"",headerIcon:"group-work",disableDomainUpLink:!0,documentTitle:gAppName,backPath:null}),this.$.pagesAjax.url="/api/communities/"+this.community.id+"/pages",this.$.pagesAjax.generateRequest(),window.appGlobals.setAnonymousGroupStatus(null),window.appGlobals.disableFacebookLoginForGroup=!1,window.appGlobals.externalGoalTriggerUrl=null,window.appGlobals.currentGroupForceSaml=!1,this.community.configuration&&this.community.configuration.signupTermsPageId&&-1!=this.community.configuration.signupTermsPageId?window.appGlobals.signupTermsPageId=this.community.configuration.signupTermsPageId:window.appGlobals.signupTermsPageId=null)},defaultGroupFirst:function(e){for(var t=[],i=null,o=0;o<e.length;o++){var n=e[o];"default"!=n.short_name?t.push(n):i=n}return t.unshift(i),t},noTestGroup:function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];"test"!=o.short_name&&"ac-posts"!=o.short_name&&"development"!=o.short_name&&-1==o.short_name.indexOf("2012")&&-1==o.short_name.indexOf("2013")&&t.push(o)}return t},_refreshAjax:function(){this.async(function(){this.$$("#ajax").generateRequest()},100)},ready:function(){}});</script></dom-module>