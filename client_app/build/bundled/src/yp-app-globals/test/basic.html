<!DOCTYPE html><html><head><meta charset="UTF-8"><title>yp-app-globals tests</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <script>if (!window.customElements) { document.write('<!--'); }</script>
    <script type="text/javascript" src="../../../bower_components/webcomponentsjs/custom-elements-es5-adapter.js"></script>
    <!--! do not remove -->
<script src="../../../bower_components/webcomponentsjs/webcomponents-lite.js"></script><script src="../../../bower_components/web-component-tester/browser.js"></script><script src="../../../bower_components/test-fixture/test-fixture-mocha.js"></script><link rel="import" href="../../../bower_components/test-fixture/test-fixture.html?v=8.0.0.4"><script type="text/javascript" src="../../i18next-1.7.4.min.js"></script><link rel="import" href="../yp-app-globals.html?v=8.0.0.4"><style include="iron-flex iron-flex-alignment">body{margin:0;padding:0}</style></head><body><test-fixture id="basic"><template><yp-app-globals></yp-app-globals></template></test-fixture><test-fixture id="resetSeenWelcome"><template><yp-app-globals reset-seen-welcome=""></yp-app-globals></template></test-fixture><script>suite("basic",function(){var e,t={json:{"Content-Type":"application/json"}};setup(function(){(e=sinon.fakeServer.create()).respondWith("GET",/\/activity-stream\/activity\/?timestamp=*/,[200,t,'{"status":"ok"}']),e.autoRespond=!0,i18n.init({lng:"en"}),window.i18n=i18n}),teardown(function(){e.restore()}),test("can access through window.global",function(){fixture("basic");var e=window.appGlobals;expect(e.localName).to.be.ok,expect(e.localName).to.be.equal("yp-app-globals")}),test("automatically open welcome dialog when new",function(e){var t=fixture("resetSeenWelcome");this.async(function(){var o=t.querySelector("#welcomeDialog");expect(o.opened).to.be.equal(!0),t.querySelector("#seenWelcomeButton").click(),this.async(function(){expect(o.opened).to.be.equal(!1),e()})})}),test("welcome dialog closed on second use",function(e){var t=fixture("basic");this.async(function(){var o=t.querySelector("#welcomeDialog");expect(o.opened).to.be.equal(!1),e()})}),test("can send activity",function(t){fixture("basic");window.appGlobals.activity("actor","verb","object","context"),this.async(function(){var o=e.requests[2];expect(o.requestBody).to.include("actor"),expect(o.requestBody).to.include("verb"),expect(o.requestBody).to.include("object"),expect(o.requestBody).to.include("context"),t()})}),test("can open default dialogue and close it",function(e){var t=fixture("basic"),o=t.querySelector("#dialog");t.openDialog("this.is.test"),this.async(function(){expect(o.opened).to.be.equal(!0),expect(o.innerHTML).to.include("this.is.test"),t.querySelector("#defaultOkButton").click(),this.async(function(){expect(o.opened).to.be.equal(!1),e()})})})});</script></body></html>