<div hidden="" by-polymer-bundler=""><dom-module id="yp-post-actions"><template><style include="iron-flex iron-flex-alignment">:host{display:block}.action-bar{@apply --layout-horizontal;position:absolute;background-color:#FFF}.action-bar[floating]{@apply --layout-horizontal;position:relative;background-color:#FFF}.action-bar-small{@apply --layout-horizontal;margin-top:8px;position:absolute;width:100%;bottom:-32px;vertical-align:bottom!important}.action-text{font-size:18px;text-align:left;vertical-align:bottom;padding-top:8px;margin-top:4px}.action-up{@apply --layout-horizontal;@apply --layout-start-justified;color:var(--primary-up-color-lighter,rgba(0,153,0,.55))}.action-down{@apply --layout-horizontal;@apply --layout-end-justified;color:var(--primary-down-color-lighter,rgba(153,0,0,.55))}.default-buttons-color{color:var(--default-endorsement-buttons-color,#656565)}.default-buttons-up-selected{color:var(--accent-color,rgba(0,0,0,1))}.default-buttons-down-selected{color:var(--accent-color,rgba(0,0,0,1))}.hearts-up-selected{color:var(--primary-hearts-color-up,rgba(168,0,0,.72))}.hearts-down-selected{color:var(--primary-hearts-color-up,rgba(168,0,0,.72))}.action-debate{@apply --layout-horizontal;@apply --layout-center-justified;color:#757575}.debate-text{padding-top:10px;padding-right:6px;color:#757575}.down-text{padding-right:0;padding-top:10px}.up-text{padding-top:10px;margin-right:8px}.down-vote-icon{margin-right:0}paper-icon-button.largeButton{width:52px;height:52px}paper-icon-button[smaller-icons]{height:48px;width:48px}.debate-icon{color:#757575}.shareIcon{margin-left:16px;margin-top:3px;--paper-share-button-icon-color:#656565;--paper-share-button-icon-height:46px;--paper-share-button-icon-width:46px;text-align:right}.shareIcon[endorsed]{--paper-share-button-icon-color:var(--accent-color-400)}.shareIcon[less-margin]{margin-left:0}.up-vote-icon{margin-left:8px}@media (max-width:320px){:host{width:250px}}.shareButtonContainer{position:absolute;bottom:55px;right:-32px;padding:0;margin:0;margin-bottom:8px}.shareButton{padding:2px}.shareShare{padding:0;margin:0;background-color:#FFF}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.action-debate{display:none}}[hidden]{display:none!important}</style><lite-signal on-lite-signal-yp-language="_languageEvent"></lite-signal><iron-media-query query="(max-width: 420px)" query-matches="{{small}}"></iron-media-query><yp-ajax id="endorseAjax" method="POST" on-response="_endorseResponse"></yp-ajax><paper-material elevation="[[elevationPlusOne]]" title$="[[disabledTitle]]" floating$="[[floating]]" animated="" class="action-bar layout horizontal"><div id="actionUp" class="action-up"><paper-icon-button id="iconUpButton" smaller-icons$="[[smallerIcons]]" disabled="[[allDisabled]]" title$="[[t('post.up_vote')]]" icon="[[endorseModeIcon(endorsementButtons,'up')]]" class="action-icon up-vote-icon largeButton" on-tap="upVote"></paper-icon-button><div class="action-text up-text" hidden$="[[post.Group.configuration.hideVoteCount]]">[[formattedUpCount]]</div></div><div class="action-debate" hidden$="[[hideDebate]]"><paper-icon-button disabled="[[allDisabled]]" title$="[[t('post.debate')]]" icon="chat-bubble-outline" class="action-icon debate-icon largeButton" on-tap="_goToPostIfNotHeader"></paper-icon-button><div class="action-text debate-text">[[formattedPointCount]]</div></div><div class="" hidden$="[[!hideDebate]]"></div><div id="actionDown" class="action-down" hidden$="[[post.Group.configuration.hideDownVoteForPost]]"><paper-icon-button smaller-icons$="[[smallerIcons]]" disabled="[[allDisabled]]" title$="[[t('post.down_vote')]]" icon="[[endorseModeIcon(endorsementButtons,'down')]]" class="action-icon down-vote-icon largeButton" on-tap="downVote"></paper-icon-button><div class="action-text down-text" hidden$="[[post.Group.configuration.hideVoteCount]]">[[formattedDownCount]]</div></div><div class="share"><paper-share-button on-share-tap="_shareTap" class="shareIcon" less-margin$="[[post.Group.configuration.hideDownVoteForPost]]" endorsed$="[[isEndorsed]]" horizontal-align="right" id="shareButton" title$="[[t('post.shareInfo')]]" facebook="" google="" twitter="" popup="" url="[[postUrl]]"></paper-share-button></div></paper-material><lite-signal on-lite-signal-got-endorsements-and-qualities="_updateEndorsementsFromSignal"></lite-signal></template><script>Polymer({is:"yp-post-actions",behaviors:[Polymer.ypLanguageBehavior,Polymer.ypNumberFormatBehavior,Polymer.ypRemoveClassBehavior,Polymer.ypGotoBehavior],properties:{post:{type:Object,observer:"_onPostChanged"},small:{type:Boolean,value:!1},headerMode:{type:Boolean,value:!1},forceSmall:{type:Boolean,value:!1},endorsementButtons:{type:String,value:"hearts"},endorseValue:{type:Number,value:0},isEndorsed:{type:Boolean,value:!1},elevation:{type:Number,value:3},elevationPlusOne:{type:Number,computed:"_elevationPlusOne(elevation)"},allDisabled:{type:Boolean,value:!1},disabledTitle:{type:String,value:null},floating:{type:Boolean,value:!1},votingDisabled:{type:Boolean,value:!1},smallerIcons:{type:Boolean,value:!1},formattedPointCount:{type:String,computed:"_formattedPointCount(post.counter_points)"},formattedDownCount:{type:String,computed:"_formattedDownCount(post.counter_endorsements_down)"},formattedUpCount:{type:String,computed:"_formattedUpCount(post.counter_endorsements_up)"},postUrl:{type:String,computed:"_postUrl(post)"},hideDebate:{type:Boolean,computed:"_hideDebate(small,forceSmall,post)"}},_formattedUpCount:function(t){return t?this.formatNumber(t):"0"},_formattedPointCount:function(t){return t?this.formatNumber(t):"0"},_formattedDownCount:function(t){return t?this.formatNumber(t):"0"},_goToPostIfNotHeader:function(){this.headerMode||this.goToPost()},_postUrl:function(t){return t?encodeURIComponent("https://"+window.location.host+"/post/"+t.id):(console.warn("Can't find post for action"),"")},_elevationPlusOne:function(t){return t<5?t+1:t},_hideDebate:function(t,e){return t||e||this.post&&this.post.Group&&this.post.Group.configuration&&this.post.Group.configuration.hideDebateIcon},_onPostChanged:function(t,e){this.set("isEndorsed",!1),t?(this.removeClass(this.$.actionUp,"hearts-up-selected"),this.removeClass(this.$.actionDown,"hearts-down-selected"),this.removeClass(this.$.actionUp,"default-buttons-up-selected"),this.removeClass(this.$.actionDown,"default-buttons-down-selected"),this.set("endorseValue",0),t.Group.configuration&&void 0!=t.Group.configuration.canVote&&0==t.Group.configuration.canVote?(this.set("votingDisabled",!0),this.set("allDisabled",!0),this.set("disabledTitle",this.t("votingDisabled"))):(this.set("votingDisabled",!1),this.set("allDisabled",!1)),t.Group.configuration&&void 0!=t.Group.configuration.endorsementButtons?this.set("endorsementButtons",t.Group.configuration.endorsementButtons):this.set("endorsementButtons","hearts"),t.Group.configuration&&(this.set("post.Group.configuration.originalHideVoteCount",t.Group.configuration.hideVoteCount),t.Group.configuration.hideVoteCountUntilVoteCompleted&&this.set("post.Group.configuration.hideVoteCount",!0)),this._updateEndorsements(t)):console.warn("No post found for post actions")},_updateEndorsementsFromSignal:function(){this.post?this._updateEndorsements(this.post):console.warn("Trying to update post null from signal")},_updateEndorsements:function(t){if(this.set("isEndorsed",!1),window.appUser&&window.appUser.loggedIn()&&window.appUser.user&&window.appUser.user.Endorsements){var e=window.appUser.endorsementPostsIndex[t.id];e&&this._setEndorsement(e.value)}},endorseModeIcon:function(t,e){return"hearts"!=t&&"hats"!=t?this.set("smallerIcons",!0):this.set("smallerIcons",!1),"thumbs"==t&&"up"==e?"thumb-up":"thumbs"==t&&"down"==e?"thumb-down":"hearts"==t&&"up"==e?"favorite-border":"hearts"==t&&"down"==e?"do-not-disturb":"hats"==t&&"up"==e?"keyboard-arrow-up":"hats"==t&&"down"==e?"keyboard-arrow-down":"arrows"==t&&"up"==e?"arrow-upward":"arrows"==t&&"down"==e?"arrow-downward":void 0},_setEndorsement:function(t){this.endorseValue=t,t>0&&this.set("isEndorsed",!0),0!==t&&this.post.Group.configuration&&this.post.Group.configuration.hideVoteCount&&!this.post.Group.configuration.originalHideVoteCount&&this.set("post.Group.configuration.hideVoteCount",!1),"hearts"==this.endorsementButtons?t>0?(this.$.actionUp.className+=" hearts-up-selected",this.removeClass(this.$.actionDown,"hearts-down-selected"),this.$.iconUpButton.icon="favorite"):t<0?(this.$.actionDown.className+=" hearts-down-selected",this.removeClass(this.$.actionUp,"hearts-up-selected"),this.$.iconUpButton.icon="favorite-border"):(this.removeClass(this.$.actionUp,"hearts-up-selected"),this.removeClass(this.$.actionDown,"hearts-down-selected"),this.$.iconUpButton.icon="favorite-border"):t>0?(this.$.actionUp.className+=" default-buttons-up-selected",this.removeClass(this.$.actionDown,"default-buttons-down-selected")):t<0?(this.$.actionDown.className+=" default-buttons-down-selected",this.removeClass(this.$.actionUp,"default-buttons-up-selected")):(this.removeClass(this.$.actionUp,"default-buttons-up-selected"),this.removeClass(this.$.actionDown,"default-buttons-down-selected"))},_enableVoting:function(){this.votingDisabled||this.set("allDisabled",!1)},_endorseResponse:function(t,e){this._enableVoting();var o=e.response.endorsement,s=e.response.oldEndorsementValue;this._setEndorsement(o.value),window.appUser.updateEndorsementForPost(this.post.id,o),s&&(s>0?this.set("post.counter_endorsements_up",this.post.counter_endorsements_up-1):s<0&&this.set("post.counter_endorsements_down",this.post.counter_endorsements_down-1)),o.value>0?this.set("post.counter_endorsements_up",this.post.counter_endorsements_up+1):o.value<0&&this.set("post.counter_endorsements_down",this.post.counter_endorsements_down+1)},generateEndorsementFromLogin:function(t){window.appUser.endorsementPostsIndex[this.post.id]||this.generateEndorsement(t)},generateEndorsement:function(t){!0===window.appUser.loggedIn()?(this.$.endorseAjax.url="/api/posts/"+this.post.id+"/endorse",this.$.endorseAjax.body={post_id:this.post.id,value:t},this.endorseValue===t?this.$.endorseAjax.method="DELETE":this.$.endorseAjax.method="POST",this.$.endorseAjax.generateRequest()):(this._enableVoting(),window.appUser.loginForEndorse(this,{value:t}))},_shareTap:function(t,e){window.appGlobals.activity("postShareOpen",e.brand,this.post.id)},upVote:function(t){this.set("allDisabled",!0),this.generateEndorsement(1),window.appGlobals.activity("clicked","endorse_up",this.post.id),this.set("isEndorsed",!0),this.updateStyles(),this._setVoteHidingStatus()},downVote:function(t){this.set("allDisabled",!0),this.generateEndorsement(-1),window.appGlobals.activity("clicked","endorse_down",this.post.id),this._setVoteHidingStatus()},_setVoteHidingStatus:function(){this.post.Group.configuration&&this.post.Group.configuration.hideVoteCountUntilVoteCompleted&&!this.post.Group.configuration.originalHideVoteCount&&this.set("post.Group.configuration.hideVoteCount",!1)},computeActionClass:function(t){return"action-bar"},ready:function(){this.endorsementButtons&&(this.$.actionDown.className+=" default-buttons-color",this.$.actionUp.className+=" default-buttons-color")}});</script></dom-module><dom-module id="yp-post-cover-media"><template><style include="iron-flex iron-flex-alignment">:host{display:block}google-streetview-pano{width:100%;height:100%;margin:0;padding:0}google-map{width:100%;height:100%;margin:0;padding:0}.main-image{width:100%;height:100%;margin:0;padding:0}.mapCanvas{width:100%;height:100%}.category-icon{width:200px;height:200px;padding-top:32px}.category-icon[tiny]{width:100px;height:100px;padding-top:24px}.category-icon[large]{width:100%;height:100%;margin:0!important;padding:0!important}@media (max-width:600px){.category-icon{width:130px;height:130px}.category-icon[large]{width:100%;height:100%;margin:0!important;padding:0!important}}.pointer{cursor:pointer}.pointer[header-mode]{cursor:default}[hidden]{display:none!important}.videoCamStatic{width:32px;height:32px;color:var(--primary-background-color);margin-top:-68px;margin-left:8px}</style><div class="mapCanvas"><template is="dom-if" if="[[noneActive]]"><iron-image header-mode$="[[headerMode]]" sizing="cover" hidden$="[[defaultPostImageEnabled]]" class="main-image pointer" src="https://i.imgur.com/sdsFAoT.png" on-tap="goToPost"></iron-image><template is="dom-if" if="[[defaultPostImageEnabled]]" restamp=""><iron-image header-mode$="[[headerMode]]" sizing="cover" class="main-image pointer" src="/api/groups/[[defaultImageGroupId]]/default_post_image/[[uploadedDefaultPostImageId]]" on-tap="goToPost"></iron-image></template></template><template is="dom-if" if="[[categoryActive]]"><div id="categoryImageId" class="layout horizontal center-center"><iron-image header-mode$="[[headerMode]]" tiny$="[[tiny]]" on-tap="goToPost" class="category-icon pointer" title="[[post.Category.name]]" sizing="contain" src$="[[getCategoryImagePath]]"></iron-image></div></template><template is="dom-if" if="[[categoryLargeActive]]"><iron-image header-mode$="[[headerMode]]" large="" on-tap="goToPost" class="category-icon pointer" title="[[post.Category.name]]" sizing="cover" src$="[[getCategoryImagePath]]"></iron-image></template><template is="dom-if" if="[[imageActive]]"><iron-image header-mode$="[[headerMode]]" on-tap="goToPost" sizing="cover" class="main-image pointer" src="[[postImagePath]]"></iron-image></template><template is="dom-if" if="[[videoActive]]"><template is="dom-if" if="[[showVideo]]" restamp=""><video id="videoPlayer" controls="" on-tap="goToPost" class="main-image pointer" src="[[postVideoPath]]"></video></template><template is="dom-if" if="[[!showVideo]]"><iron-image header-mode$="[[headerMode]]" on-tap="goToPost" sizing="cover" class="main-image pointer" src="[[postVideoPath]]"></iron-image><iron-icon icon="videocam" class="videoCamStatic"></iron-icon></template></template><template is="dom-if" if="[[!disableMaps]]"><template is="dom-if" if="[[streetViewActive]]"><iron-image on-tap="goToPost" class="main-image pointer" sizing="cover" src="https://maps.googleapis.com/maps/api/staticmap?center=[[latitude]],[[longitude]]&amp;zoom=[[zoomLevel]]&amp;size=432x243&amp;maptype=hybrid&amp;markers=color:red%7Clabel:%7C[[latitude]],[[longitude]]&amp;key=[[staticMapsApiKey]]" hidden$="[[streetViewActivated]]"></iron-image><template is="dom-if" if="[[streetViewActivated]]"><google-streetview-pano position$="[[mapPosition]]" heading="330" api-key="AIzaSyDkF_kak8BVZA5zfp5R4xRnrX8HP3hjiL0" pitch="2" zoom="0.8" disable-default-ui=""></google-streetview-pano></template></template><template is="dom-if" if="[[mapActive]]"><iron-image on-tap="goToPost" class="main-image pointer" hidden$="[[mapActivated]]" sizing="cover" src="https://maps.googleapis.com/maps/api/staticmap?center=[[latitude]],[[longitude]]&amp;size=432x243&amp;zoom=[[zoomLevel]]&amp;maptype=[[mapType]]&amp;markers=color:red%7Clabel:%7C[[latitude]],[[longitude]]&amp;key=[[staticMapsApiKey]]"></iron-image><template is="dom-if" if="[[mapActivated]]"><google-map additional-map-options="{&quot;keyboardShortcuts&quot;:false}" id="coverMediaMap" class="map" libraries="places" fit-to-markers="" zoom$="[[zoomLevel]]" map-type$="[[mapType]]" api-key="AIzaSyDkF_kak8BVZA5zfp5R4xRnrX8HP3hjiL0"><google-map-marker slot="markers" latitude="[[latitude]]" longitude="[[longitude]]"></google-map-marker></google-map></template></template></template></div><lite-signal on-lite-signal-yp-language="_languageEvent"></lite-signal><lite-signal on-lite-signal-yp-pause-video="_pauseVideo"></lite-signal></template><script>Polymer({is:"yp-post-cover-media",behaviors:[Polymer.ypLanguageBehavior,Polymer.ypMediaFormatsBehavior,Polymer.ypGotoBehavior],properties:{post:{type:Object,notify:!0,observer:"_postChanged"},noneActive:{type:Boolean,value:!1,computed:"_isNoneActive(post)"},categoryActive:{type:Boolean,value:!1,computed:"_isCategoryActive(post)"},categoryLargeActive:{type:Boolean,value:!1,computed:"_isCategoryLargeActive(post)"},imageActive:{type:Boolean,value:!1,computed:"_isImageActive(post)"},videoActive:{type:Boolean,value:!1,computed:"_isVideoActive(post)"},mapActive:{type:Boolean,value:!1,computed:"_isMapActive(post)"},streetViewActive:{type:Boolean,value:!1,computed:"_isStreetViewActive(post)"},mapType:{type:String,computed:"_mapType(post.location)"},zoomLevel:{type:String,computed:"_zoomLevel(post.location)"},latitude:{type:Number,computed:"_getLatitute(post.location.latitude)"},longitude:{type:Number,computed:"_getLongitude(post.location.longitude)"},mapPosition:{type:Object,computed:"_getMapPosition(post.location)"},getCategoryImagePath:{type:String,computed:"_getCategoryImagePath(post)"},postImagePath:{type:String,computed:"_postImagePath(post)"},postVideoPath:{type:String,computed:"_postVideoPath(post)"},headerMode:{type:Boolean,value:!1,observer:"_headerModeChanged"},disableMaps:{type:Boolean,value:!1},mapActivated:{type:Boolean,value:!1},streetViewActivated:{type:Boolean,value:!1},staticMapsApiKey:{type:String,value:"AIzaSyBYy8UvdDD650mz7k1pY0j2hBFQmCPVnxA"},tiny:{type:Boolean,value:!1},uploadedDefaultPostImageId:{type:String,value:null},defaultImageGroupId:{type:String,value:null},defaultPostImageEnabled:{type:Boolean,value:!1},showVideo:{type:Boolean,value:!1}},_pauseVideo:function(){var e=this.$$("#videoPlayer");e&&e.pause()},_headerModeChanged:function(e){!0===e&&this.async(function(){this.set("mapActivated",!0),this.set("streetViewActivated",!0)})},_getLatitute:function(e){return e||0},_getLongitude:function(e){return e||0},_isNoneActive:function(e){return!!this._withCoverMediaType(e,"none")},_isCategoryActive:function(e){return!!(e&&this._withCoverMediaType(e,"category")&&e.id<=11e3&&this._isDomainWithOldCategories())},_isDomainWithOldCategories:function(){var e=window.location.hostname;return e.indexOf("betrireykjavik.is")>-1||e.indexOf("betraisland.is")>-1||e.indexOf("yrpri.org")>-1},_isCategoryLargeActive:function(e){return!(!e||!this._withCoverMediaType(e,"category")||!(e.id>11e3)&&this._isDomainWithOldCategories())},_isImageActive:function(e){return!!this._withCoverMediaType(e,"image")},_isVideoActive:function(e){return!!this._withCoverMediaType(e,"video")},_isMapActive:function(e){return!!(e&&e.location&&e.location.latitude&&this._withCoverMediaType(e,"map"))},_isStreetViewActive:function(e){return!!(e&&e.location&&e.location.latitude&&this._withCoverMediaType(e,"streetView"))},_postChanged:function(e,t){e&&e.Group&&e.Group.configuration&&e.Group.configuration.uploadedDefaultPostImageId&&""!=e.Group.configuration.uploadedDefaultPostImageId?(this.set("uploadedDefaultPostImageId",e.Group.configuration.uploadedDefaultPostImageId),this.set("defaultImageGroupId",e.Group.id),this.set("defaultPostImageEnabled",!0)):(this.set("defaultPostImageEnabled",!1),this.async(function(){this.set("defaultImageGroupId",null),this.set("uploadedDefaultPostImageId",null)}))},_zoomLevel:function(e){return e&&e.map_zoom&&""!=e.map_zoom?e.map_zoom:"10"},_mapType:function(e){return e&&e.mapType&&""!=e.mapType?e.mapType:"roadmap"},_withCoverMediaType:function(e,t){return e?"none"==t?!(e.Category||e.cover_media_type&&"none"!=e.cover_media_type):!("category"!=t||!e.Category||e.cover_media_type&&"none"!=e.cover_media_type)||e&&e.cover_media_type==t:(console.error("No post for "+t),!1)},_getMapPosition:function(e){return e?{lat:e.latitude,lng:e.longitude}:{lat:0,lng:0}},_postImagePath:function(e){return e?this.getImageFormatUrl(e.PostHeaderImages,0):""},_postVideoPath:function(e){return e&&e.PostVideos&&e.PostVideos.length>0&&e.PostVideos[0].formats&&e.PostVideos[0].formats.length>0?this.showVideo?e.PostVideos[0].formats[0]:e.PostVideos[0].VideoImages&&e.PostVideos[0].VideoImages.length>0?JSON.parse(e.PostVideos[0].VideoImages[0].formats)[0]:"":""},_getCategoryImagePath:function(e){return e&&e.Category&&e.Category.CategoryIconImages?this.getImageFormatUrl(e.Category.CategoryIconImages,0):""}});</script></dom-module><script>Polymer.YpPostBehavior={properties:{post:{type:Object,notify:!0},endorseMode:{type:String},image:{type:Boolean,value:!0},elevation:{type:Number,value:1},postName:{type:String,computed:"postNameFunc(post)"},postDescription:{type:String,computed:"postDescriptionFunc(post)"},getCategoryImagePath:{type:String,computed:"_getCategoryImagePath(post)"}},postNameFunc:function(t){return t&&t.name?this.truncate(this.trim(t.name),100):t?t.short_name:""},postDescriptionFunc:function(t){return t&&t.description?this.truncate(this.trim(t.description),500,"..."):t&&t.Points&&t.Points[0]?this.truncate(this.trim(t.Points[0].content),500,"..."):""},_getCategoryImagePath:function(t){return t&&t.Category&&t.Category.CategoryIconImages?this.getImageFormatUrl(t.Category.CategoryIconImages,0):""}};</script><dom-module id="yp-post-header"><template><style include="iron-flex iron-flex-alignment">:host{display:block}.infoContainer{@apply --layout-vertical;color:var(--primary-color-more-darker,#424242);line-height:var(--description-line-height,1.3);width:540px;padding:0;padding-bottom:16px;padding-top:16px}.voting{@apply --layout-horizontal;@apply --layout-center;text-align:center;padding-left:16px;padding-right:24px}yp-post-actions{position:absolute;right:8px;bottom:0}.edit{color:#eee;position:absolute;top:0;right:0;padding-right:0;margin-right:0}.post-name{margin:0;font-size:var(--extra-large-heading-size,28px);background-color:var(--primary-color-600);color:#FFF;padding:16px;cursor:pointer;font-weight:700;min-height:33px}.category-icon{width:100px;height:100px}.category-image-container{text-align:right;margin-top:-52px}.postCardCursor{cursor:pointer}yp-post-cover-media{position:relative;width:420px;height:236px}.postCard{width:960px;background-color:#fff;@apply --layout-horizontal;position:relative}.description{padding-bottom:2px;padding-left:8px;padding-right:8px}paper-icon-button{position:absolute;top:0;right:0}.userInfo{color:#ddd;font-size:17px}@media (max-width:960px){:host{width:600px}.postCard{width:600px;@apply --layout-wrap;}yp-post-cover-media{width:420px;height:236px}.voting{padding-left:0;padding-right:0}.card-actions{left:24px;right:0;width:320px}.card-content{width:600px!important;padding-bottom:74px}.infoContainer{width:100%}.description[no-user-info]{padding-bottom:32px}.userInfo{font-size:14px}.mediaAndInfoContainer{@apply --layout-center-center;}}@media (max-width:800px){.post-name{font-size:22px;min-height:21px}}@media (max-width:420px){:host{width:304px}.postCard{height:100%!important;width:304px!important}yp-post-cover-media{width:304px!important;height:171px!important}.card-actions{left:0;width:280px}.post-name{font-size:18px}.description{padding-bottom:32px;font-size:15px}}.userWithOrg{--ak-user-name-color:#555555}[hidden]{display:none!important}</style><lite-signal on-lite-signal-yp-language="_languageEvent"></lite-signal><lite-signal on-lite-signal-logged-in="_userLoggedIn"></lite-signal><div class="layout horizontal center-center"><paper-material class="postCard" elevation="[[elevation]]" animated=""><div class="layout vertical wrap"><div class="post-name layout vertical" on-tap="goToPostIfNotHeader"><div><yp-magic-text text-type="postName" content-language="[[post.language]]" content="[[postName]]" content-id="[[post.id]]"></yp-magic-text></div><template is="dom-if" if="[[post.Group.configuration.showWhoPostedPosts]]"><div class="layout horizontal userInfo"><yp-user-with-organization class="userWithOrg" hide-image="" title-date="[[post.user.name]]" user$="[[post.User]]"></yp-user-with-organization></div></template></div><div class="layout horizontal wrap mediaAndInfoContainer"><yp-post-cover-media show-video="" header-mode$="[[headerMode]]" post="[[post]]"></yp-post-cover-media><div class="layout vertical"><div class="infoContainer"><yp-magic-text id="description" text-type="postContent" content-language="[[post.language]]" content="[[post.description]]" no-user-info$="[[!post.Group.configuration.showWhoPostedPosts]]" content-id="[[post.id]]" class="description" truncate="500" more-text="{{t('readMore')}}" close-dialog-text="[[t('close')]]"></yp-magic-text></div><div class="card-actions"><yp-post-actions floating="" header-mode="[[headerMode]]" elevation="-1" endorse-mode="[[endorseMode]]" class="voting" post="[[post]]"></yp-post-actions></div></div><template is="dom-if" if="[[headerMode]]"><template is="dom-if" if="[[loggedInUser]]"><paper-menu-button vertical-align="top" horizontal-align="right" class="edit"><paper-icon-button icon="more-vert" slot="dropdown-trigger"></paper-icon-button><paper-listbox slot="dropdown-content" on-iron-select="_menuSelection"><template is="dom-if" if="[[hasPostAccess]]"><paper-item id="editMenuItem">[[t('post.edit')]]</paper-item><paper-item id="moveMenuItem">[[t('post.move')]]</paper-item><paper-item hidden$="[[!checkPostAdminOnlyAccess(post)]]" id="statusChangeMenuItem">[[t('post.statusChange')]]</paper-item><paper-item id="deleteMenuItem">[[t('post.delete')]]</paper-item><paper-item id="anonymizeMenuItem">[[t('anonymizePostAndContent')]]</paper-item><paper-item id="deleteContentMenuItem">[[t('deletePostContent')]]</paper-item></template><paper-item id="reportMenuItem">[[t('post.report')]]</paper-item></paper-listbox></paper-menu-button></template></template></div></div></paper-material></div><lite-signal on-lite-signal-got-admin-rights="_gotAdminRights"></lite-signal></template><script>Polymer({is:"yp-post-header",behaviors:[Polymer.ypLanguageBehavior,Polymer.YpPostBehavior,Polymer.AccessHelpers,Polymer.ypGotAdminRightsBehavior,Polymer.ypLoggedInUserBehavior,Polymer.ypGotoBehavior,Polymer.ypTruncateBehavior,Polymer.ypMediaFormatsBehavior],properties:{selectedMenuItem:{type:String},headerMode:{type:Boolean,value:!1},elevation:{type:Number,value:2},post:{type:Object,observer:"_postChanged"},hasPostAccess:{type:Boolean,value:!1,notify:!0,computed:"_hasPostAccess(post, gotAdminRights)"}},_hasPostAccess:function(t,e){return!(!t||!e)&&null!=this.checkPostAccess(t)},goToPostIfNotHeader:function(){this.headerMode||this.goToPost()},_postChanged:function(t){t&&t.description&&this.async(function(){var e=this.$$("#description");e?t.data&&"lawIssue"==t.data.dataType&&t.data.issueStatus&&(e.content+=" - "+t.data.issueStatus):console.error("Can't find description element")})},updateDescriptionIfEmpty:function(t){this.post.description&&""!=this.post.description||this.set("post.description",t)},_refresh:function(){Polymer.dom(document).querySelector("yp-app").getDialogAsync("postEdit",function(t){t.selected=0,this.fire("refresh")}.bind(this))},_menuSelection:function(t,e){"editMenuItem"==e.item.id?this._openEdit():"deleteMenuItem"==e.item.id?this._openDelete():"statusChangeMenuItem"==e.item.id?this._openPostStatusChange():"moveMenuItem"==e.item.id?this._openMovePost():"anonymizeMenuItem"==e.item.id?this._openAnonymizeContent():"deleteContentMenuItem"==e.item.id&&this._openDeleteContent(),this.$$("paper-listbox").select(null)},_openMovePost:function(){Polymer.dom(document).querySelector("yp-app").getDialogAsync("postMove",function(t){t.setupAndOpen(this.post,this._refresh.bind(this))}.bind(this))},_openPostStatusChange:function(){Polymer.dom(document).querySelector("yp-app").getDialogAsync("postStatusChangeEdit",function(t){t.setup(this.post,null,this._refresh.bind(this)),t.open("new",{postId:this.post.id,statusChange:!0})}.bind(this))},_openEdit:function(){window.appGlobals.activity("open","post.edit"),Polymer.dom(document).querySelector("yp-app").getDialogAsync("postEdit",function(t){t.setup(this.post,!1,this._refresh.bind(this),this.post.Group),t.open("edit",{postId:this.post.id})}.bind(this))},_openReport:function(){window.appGlobals.activity("open","post.report"),Polymer.dom(document).querySelector("yp-app").getDialogAsync("apiActionDialog",function(t){t.setup("/api/posts/"+this.post.id+"/report",this.t("reportConfirmation"),this._onReport.bind(this),this.t("post.report"),"PUT"),t.open()}.bind(this))},_openDelete:function(){window.appGlobals.activity("open","post.delete"),Polymer.dom(document).querySelector("yp-app").getDialogAsync("apiActionDialog",function(t){t.setup("/api/posts/"+this.post.id,this.t("post.deleteConfirmation"),this._onDeleted.bind(this)),t.open()}.bind(this))},_openDeleteContent:function(){window.appGlobals.activity("open","postDeleteContent"),Polymer.dom(document).querySelector("yp-app").getDialogAsync("apiActionDialog",function(t){t.setup("/api/posts/"+this.post.id+"/delete_content",this.t("postDeleteContentConfirmation")),t.open()}.bind(this))},_openAnonymizeContent:function(){window.appGlobals.activity("open","postAnonymizeContent"),Polymer.dom(document).querySelector("yp-app").getDialogAsync("apiActionDialog",function(t){t.setup("/api/posts/"+this.post.id+"/anonymize_content",this.t("postAnonymizeContentConfirmation")),t.open()}.bind(this))},_onReport:function(){window.appGlobals.notifyUserViaToast(this.t("post.report")+": "+this.post.name)},_onDeleted:function(){this.dispatchEvent(new CustomEvent("yp-refresh-group",{bubbles:!0,composed:!0})),this.redirectTo("/group/"+this.post.group_id)}});</script></dom-module><dom-module id="yp-post-points"><template><style include="iron-flex iron-flex-alignment">:host {
        display: block;
      }

      .item {
        @apply --layout-horizontal;
      }

      .main-container {
        @apply --layout-horizontal;
        background-color: var(--primary-background-color);
      }

      .point {
        padding-top: 32px;
        padding-bottom: 32px;
        padding-left: 24px;
        padding-right: 24px;
        @apply --layout-vertical;
        width: 398px;
      }

      .pointInputMaterial {
        padding-top: 24px;
        padding-bottom: 16px;
        padding-left: 16px;
        padding-right: 16px;
        margin-bottom: 16px;
        background-color: #FFF;
      }

      paper-toast {
        z-index: 9999;
      }

      paper-material {
        background-color: #fff;
      }

      yp-point {
        padding-top: 8px;
      }

      .pointMaterial {
        padding-top: 8px;
        background-color: #FFF;
        padding-left: 0;
        padding-right: 0;
        width: 430px;
        margin-bottom: 12px;
      }

      .thumbIcon {
        height: 64px;
        width: 64px;
        padding-bottom: 16px;
        color: var(--primary-color);
      }

      .editIcon {
        height: 28px;
        width: 28px;
        padding-bottom: 16px;
        color: var(--primary-color);
      }

      .addPointFab {
        width: 100%;
        color: #FFF;
      }

      paper-textarea {
        --paper-input-container-label: {
          font-size: 26px;
          height: 42px;
          overflow: visible;
          color: #AAAAAA;
        }
      }

      .howToWriteInfoText {
        padding-top: 4px;
        color: var(--primary-color);
      }

      .point .main-container .topContainer {
        background-color: var(--primary-background-color) !important;
      }

      .penContainer {
        margin-top: 42px;
      }

      .upOrDown {
        margin-top: 72px;
      }

      paper-radio-button {
        --paper-radio-button-checked-color: var(--accent-color) !important;
        font-size: 16px;
      }

      #pointUpOrDownMaterial {
        margin-top: 16px;
      }

      .mobileFab {
        margin-top: 8px;
      }

      paper-button {
        color: #FFF;
        background-color: var(--accent-color);
      }

      @media (max-width: 985px) {
        .pointInputMaterial {
          width: 420px;
          font-size: 30px;
        }
      }

      @media (max-width: 600px) {
        .pointInputMaterial {
          width: 268px;
          font-size: 10px;
          padding-top: 4px;
        }

        .pointMaterial {
          width: 300px;
        }

        .main-container {
          width: 310px;
        }

        iron-list {
          width: 300px;
        }
      }

      .mobilePaperTextArea {
        --paper-input-container-label: {
          font-size: 19px;
        };
      }

      .pointMainHeader {
        font-size: 26px;
        margin-bottom: 16px;
        color: #555;
      }

      #pointUpMaterialNotUsed {
        border-top: solid 2px;
        border-top-color:  var(--master-point-up-color);
      }

      #pointDownMaterialNotUsed {
        border-top: solid 2px;
        border-top-color: var(--master-point-down-color);
      }

      .pointElement {
        margin-bottom: 18px;
      }

      [hidden] {
        display: none !important;
      }

      iron-list {
        height: 80vh;
      }

      iron-list {
        --iron-list-items-container: {
        };
      }

      :focus {
        outline: none;
      }

      #ironListMobile[debate-disabled] {
        margin-top: 16px;
      }

      .mainSpinner {
        margin: 32px;
      }

      paper-button[disabled] {
        background-color: #333;
        color: #FFF;
      }

      .videoInfo {
        margin-top: 8px;
        margin-bottom: 8px;
      }

      .uploadNotLoggedIn {
        width: 200px;
        background-color: #FFF;
        color: #000;
      }

      .pointButtons {
        margin-bottom: 4px;
      }</style><lite-signal on-lite-signal-yp-language="_languageEvent"></lite-signal><lite-signal on-lite-signal-yp-update-points-for-post="_loadNewPointsIfNeeded"></lite-signal><lite-signal on-lite-signal-logged-in="_userLoggedIn"></lite-signal><iron-media-query query="(min-width: 985px)" query-matches="{{largeMode}}"></iron-media-query><div class="layout horizontal center-center" hidden$="[[ajaxActive]]"><yp-ajax id="ajax" large-spinner="" active$="{{ajaxActive}}" on-response="_response"></yp-ajax></div><template is="dom-if" if="[[largeMode]]" restamp=""><div class="layout vertical topContainer"><div class="main-container"><div class="point"><template is="dom-if" if="[[!post.Group.configuration.alternativePointForHeader]]"><div class="pointMainHeader layout horizontal center-center">[[t('pointsFor')]]</div></template><template is="dom-if" if="[[post.Group.configuration.alternativePointForHeader]]"><div class="pointMainHeader layout horizontal center-center">[[post.Group.configuration.alternativePointForHeader]]</div></template><paper-material id="pointUpMaterial" elevation="1" class="pointInputMaterial layout vertical" animated="" hidden$="[[post.Group.configuration.disableDebate]]"><paper-textarea id="up_point" on-tap="focusUpPoint" on-focus="focusTextArea" on-blur="blurTextArea" value="{{textValueUp}}" label$="[[labelUp]]" char-counter="" rows="2" hidden$="[[uploadedVideoUpId]]" max-rows="3" maxlength="500"></paper-textarea><div class="horizontal end-justified layout" hidden$="[[post.Group.configuration.hideEmoji]]"><emoji-selector id="pointUpEmojiSelector" hidden$="[[uploadedVideoUpId]]"></emoji-selector></div><template is="dom-if" if="[[post.Group.configuration.allowPointVideoUploads]]"><div hidden$="[[hideUpVideo]]"><div class="layout vertical center-center uploadSection" hidden$="[[!loggedInUser]]"><yp-file-upload id="videoFileUploadUp" container-type="points" group="[[post.Group]]" raised="true" multi="false" video-upload="" method="POST" on-success="_videoUpUploaded"><iron-icon class="icon" icon="videocam"></iron-icon><span>[[t('uploadVideoPointFor')]]</span></yp-file-upload><div class="videoInfo">[[t('pointVideoInfo')]] <b>[[post.Group.configuration.videoPointUploadLimitSec]] [[t('seconds')]].</b></div></div><div class="layout horizontal center-center"><paper-button class="uploadNotLoggedIn" raised="" hidden$="[[loggedInUser]]" on-tap="_openLogin">[[t('uploadVideoPointFor')]]</paper-button></div></div></template><div hidden="[[!ifLengthUpIsRight]]"><div class="addPointFab layout horizontal center-center"><paper-button raised="" class="submitButton" disabled$="[[addPointDisabled]]" icon="add" mini="" elevation="3" on-tap="addPointUp" title="[[t('point.add_up')]]">[[t('postPoint')]]</paper-button></div></div></paper-material><div id="allUpPoints"><iron-list items="[[upPoints]]" as="point" scroll-target="document" scroll-offset="550"><template><div class="item" tabindex$="[[tabIndex]]"><paper-material id="point[[point.id]]" elevation="1" animated="" class="pointMaterial"><yp-point point="[[point]]"></yp-point></paper-material></div></template></iron-list></div></div><div class="point"><template is="dom-if" if="[[!post.Group.configuration.alternativePointAgainstHeader]]"><div class="pointMainHeader layout horizontal center-center">[[t('pointsAgainst')]]</div></template><template is="dom-if" if="[[post.Group.configuration.alternativePointAgainstHeader]]"><div class="pointMainHeader layout horizontal center-center">[[post.Group.configuration.alternativePointAgainstHeader]]</div></template><paper-material id="pointDownMaterial" elevation="1" class="pointInputMaterial layout vertical" animated="" hidden$="[[post.Group.configuration.disableDebate]]"><paper-textarea id="down_point" on-tap="focusDownPoint" on-focus="focusTextArea" on-blur="blurTextArea" value="{{textValueDown}}" label$="[[labelDown]]" char-counter="" rows="2" hidden$="[[uploadedVideoDownId]]" max-rows="5" maxlength="500"></paper-textarea><div class="horizontal end-justified layout" hidden$="[[post.Group.configuration.hideEmoji]]"><emoji-selector id="pointDownEmojiSelector" hidden$="[[uploadedVideoDownId]]"></emoji-selector></div><template is="dom-if" if="[[post.Group.configuration.allowPointVideoUploads]]"><div hidden$="[[hideDownVideo]]"><div class="layout vertical center-center uploadSection" hidden$="[[!loggedInUser]]"><yp-file-upload id="videoFileUploadDown" container-type="points" group="[[post.Group]]" raised="true" multi="false" video-upload="" method="POST" on-success="_videoDownUploaded"><iron-icon class="icon" icon="videocam"></iron-icon><span>[[t('uploadVideoPointAgainst')]]</span></yp-file-upload><div class="videoInfo">[[t('pointVideoInfo')]] <b>[[post.Group.configuration.videoPointUploadLimitSec]] [[t('seconds')]].</b></div></div><div class="layout horizontal center-center"><paper-button class="uploadNotLoggedIn" raised="" hidden$="[[loggedInUser]]" on-tap="_openLogin">[[t('uploadVideoPointAgainst')]]</paper-button></div></div></template><div hidden="[[!ifLengthDownIsRight]]"><div class="addPointFab layout horizontal center-center"><paper-button raised="" disabled$="[[addPointDisabled]]" icon="add" elevation="3" on-tap="addPointDown" title="[[t('point.add_down')]]">[[t('postPoint')]]</paper-button></div></div></paper-material><div id="allDownPoints"><iron-list id="ironListDown" items="[[downPoints]]" as="point" scroll-target="document" scroll-offset="550"><template><div class="item" tabindex$="[[tabIndex]]"><paper-material id="point[[point.id]]" elevation="1" animated="" class="pointMaterial"><yp-point point="[[point]]"></yp-point></paper-material></div></template></iron-list></div></div></div></div></template><template is="dom-if" if="[[!largeMode]]" restamp=""><paper-material id="pointUpOrDownMaterial" elevation="1" class="pointInputMaterial layout vertical" animated="" hidden$="[[post.Group.configuration.disableDebate]]"><paper-textarea id="mobileUpOrDownPoint" class="mobilePaperTextArea" on-tap="focusDownPoint" on-focus="focusTextArea" on-blur="blurTextArea" value="{{textValueMobileUpOrDown}}" label="[[labelMobileUpOrDown]]" char-counter="" rows="2" hidden$="[[uploadedVideoMobileId]]" max-rows="3" maxlength="500"></paper-textarea><div class="vertical end-justified layout"><div class="layout horizontal pointButtons"><paper-radio-group id="upOrDown" attribute-for-selected="name" class="layout horizontal" selected="{{pointUpOrDownSelected}}"><paper-radio-button name="pointFor">[[t('pointForShort')]]</paper-radio-button><paper-radio-button name="pointAgainst">[[t('pointAgainstShort')]]</paper-radio-button></paper-radio-group><div class="flex"></div><div hidden$="[[uploadedVideoMobileId]]"><emoji-selector id="pointUpDownEmojiSelector" hidden$="[[post.Group.configuration.hideEmoji]]"></emoji-selector></div></div><template is="dom-if" if="[[post.Group.configuration.allowPointVideoUploads]]"><div hidden$="[[hideMobileVideo]]"><div class="layout vertical center-center uploadSection" hidden$="[[!loggedInUser]]"><yp-file-upload id="videoFileUploadMobile" container-type="points" group="[[post.Group]]" raised="true" multi="false" video-upload="" method="POST" on-success="_videoMobileUploaded"><iron-icon class="icon" icon="videocam"></iron-icon><span hidden$="[[!selectedPointForMobile]]">[[t('uploadVideoPointFor')]]</span> <span hidden$="[[selectedPointForMobile]]">[[t('uploadVideoPointAgainst')]]</span></yp-file-upload><div class="videoInfo">[[t('pointVideoInfo')]] <b>[[post.Group.configuration.videoPointUploadLimitSec]] [[t('seconds')]].</b></div></div><div class="layout horizontal center-center"><paper-button class="uploadNotLoggedIn" raised="" hidden$="[[loggedInUser]]" on-tap="_openLogin"><span hidden$="[[!selectedPointForMobile]]">[[t('uploadVideoPointFor')]]</span> <span hidden$="[[selectedPointForMobile]]">[[t('uploadVideoPointAgainst')]]</span></paper-button></div></div></template></div><div hidden="[[!ifLengthMobileRight]]"><div class="addPointFab layout horizontal center-center mobileFab"><paper-button raised="" disabled$="[[addPointDisabled]]" icon="add" elevation="3" on-tap="addMobilePointUpOrDown" title="[[t('postPoint')]]"><span hidden$="[[!selectedPointForMobile]]">[[t('postPointFor')]]</span> <span hidden$="[[selectedPointForMobile]]">[[t('postPointAgainst')]]</span></paper-button></div></div></paper-material><div class="layout vertical center-center"><iron-list id="ironListMobile" debate-disabled$="[[post.Group.configuration.disableDebate]]" items="[[points]]" as="point" scroll-target="document" scroll-offset="[[mobileScrollOffset]]"><template><div class="item" tabindex$="[[tabIndex]]"><paper-material id="point[[point.id]]" elevation="1" animated="" class="pointMaterial"><yp-point point="[[point]]"></yp-point></paper-material></div></template></iron-list></div></template><div class="layout vertical center-center"><yp-ajax id="newPointsAjax" on-response="_newPointsResponse"></yp-ajax><yp-ajax id="newPointAjax" on-error="_newPointError" method="POST" url="/api/points" on-response="_newPointResponse"></yp-ajax></div><paper-toast id="newPointToast" text="[[newPointTextCombined]]"></paper-toast></template><script>Polymer({is:"yp-post-points",behaviors:[Polymer.ypLanguageBehavior,Polymer.ypTruncateBehavior,Polymer.ypLoggedInUserBehavior],properties:{host:String,downPoints:{type:Array,value:[]},upPoints:{type:Array,value:[]},textValueUp:{type:String,notify:!0,value:""},textValueDown:{type:String,notify:!0,value:""},newPointTextCombined:{type:String},post:{type:Object,observer:"_postChanged"},points:{type:Array,value:null,observer:"_pointsChanged"},largeMode:{type:Boolean,value:!1,observer:"_updateEmojiBindings"},textValueMobileUpOrDown:String,labelMobileUpOrDown:String,labelUp:String,labelDown:String,pointUpOrDownSelected:{type:String,observer:"_pointUpOrDownSelectedChanged",value:"pointFor"},latestPointCreatedAt:{type:Date,value:null},scrollToId:{type:String,value:null,observer:"_scrollToIdChanged"},ironListResizeScrollThreshold:{type:Number,computed:"_ironListResizeScrollThreshold(largeMode)"},ironListPaddingTop:{type:Number,computed:"_ironListPaddingTop(wide)"},ifLengthUpIsRight:{type:Boolean,value:!1,computed:'ifLengthIsRight("up",textValueUp, uploadedVideoUpId)'},ifLengthDownIsRight:{type:Boolean,value:!1,computed:'ifLengthIsRight("down", textValueDown, uploadedVideoDownId)'},ifLengthMobileRight:{type:Boolean,value:!1,computed:'ifLengthIsRight("mobile", textValueMobileUpOrDown, uploadedVideoMobileId)'},addPointDisabled:{type:Boolean,value:!1},mobileScrollOffset:{type:Number,computed:"_mobileScrollOffset(largeMode,post)"},ajaxActive:{type:Boolean,value:!1},uploadedVideoUpId:{type:String,value:null},uploadedVideoDownId:{type:String,value:null},uploadedVideoMobileId:{type:String,value:null},currentVideoId:{type:String,value:null},hideUpVideo:{type:Boolean,value:!1},hideDownVideo:{type:Boolean,value:!1},hideMobileVideo:{type:Boolean,value:!1},selectedPointForMobile:{type:Boolean,value:!0}},_openLogin:function(){this.fire("yp-open-login")},_videoUpUploaded:function(t,e){this.set("uploadedVideoUpId",e.videoId)},_videoDownUploaded:function(t,e){this.set("uploadedVideoDownId",e.videoId)},_videoMobileUploaded:function(t,e){this.set("uploadedVideoMobileId",e.videoId)},_mobileScrollOffset:function(t,e){if(!t&&e){var i=this.$$("#ironListMobile");if(i)return i.getBoundingClientRect().top;console.error("Can't find mobile list element")}},_newPointError:function(){this.set("addPointDisabled",!1)},_ironListResizeScrollThreshold:function(t){return 300},_ironListPaddingTop:function(t){return t?600:500},listeners:{"yp-point-deleted":"_pointDeleted"},observers:["_setupPointTextStartState(pointUpOrDownSelected, post)"],_setupPointTextStartState:function(t,e){e&&this._pointUpOrDownSelectedChanged(t)},_loadNewPointsIfNeeded:function(t,e){this.post&&this.post.id==e.postId&&(this.latestPointCreatedAt?(this.$.newPointsAjax.url="/api/posts/"+this.post.id+"/newPoints",this.$.newPointsAjax.params={latestPointCreatedAt:this.latestPointCreatedAt},this.$.newPointsAjax.generateRequest()):console.error("Trying to send point without latestPointCreatedAt"))},_newPointsResponse:function(t,e){this._preProcessPoints(e.response).forEach(function(t){this._insertNewPoint(t)}.bind(this)),this._updateCounterInfo()},_pointDeleted:function(){this.$.ajax.generateRequest()},_pointsChanged:function(t){t&&this._updateEmojiBindings()},_updateEmojiBindings:function(){this.async(function(){if(this.largeMode){var t=this.$$("#up_point"),e=this.$$("#down_point"),i=this.$$("#pointUpEmojiSelector"),o=this.$$("#pointDownEmojiSelector");t&&e&&i&&o?(i.inputTarget=t,o.inputTarget=e):console.warn("Wide: Can't bind emojis :(")}else{var n=this.$$("#mobileUpOrDownPoint"),s=this.$$("#pointUpDownEmojiSelector");n&&s?s.inputTarget=n:console.warn("Small: Can't bind emojis :(")}}.bind(this),500)},_pointUpOrDownSelectedChanged:function(t){"pointFor"==t?(this.post&&this.post.Group&&this.post.Group.configuration&&this.post.Group.configuration.alternativePointForLabel?this.set("labelMobileUpOrDown",this.post.Group.configuration.alternativePointForLabel):this.set("labelMobileUpOrDown",this.t("point.for")),this.set("selectedPointForMobile",!0)):"pointAgainst"==t&&(this.post&&this.post.Group&&this.post.Group.configuration&&this.post.Group.configuration.alternativePointAgainstLabel?this.set("labelMobileUpOrDown",this.post.Group.configuration.alternativePointAgainstLabel):this.set("labelMobileUpOrDown",this.t("point.against")),this.set("selectedPointForMobile",!1))},_clearVideo:function(){this.set("uploadedVideoUpId",null),this.set("uploadedVideoDownId",null),this.set("uploadedVideoMobileId",null),this.set("currentVideoId",null),this.set("hideUpVideo",!1),this.set("hideDownVideo",!1),this.set("hideMobileVideo",!1),this.$$("#videoFileUploadUp")&&this.$$("#videoFileUploadUp").clear(),this.$$("#videoFileUploadDown")&&this.$$("#videoFileUploadDown").clear(),this.$$("#videoFileUploadMobile")&&this.$$("#videoFileUploadMobile").clear()},_postChanged:function(t){this.set("points",null),this.set("upPoints",null),this.set("downPoints",null),this.set("latestPointCreatedAt",null),this._clearVideo(),t&&(this.host?this.$.ajax.url=this.host+"/api/posts/"+t.id+"/points":this.$.ajax.url="/api/posts/"+t.id+"/points",this.$.ajax.generateRequest(),this.post&&this.post.Group&&this.post.Group.configuration&&this.post.Group.configuration.alternativePointForLabel?this.set("labelUp",this.post.Group.configuration.alternativePointForLabel):this.set("labelUp",this.t("point.for")),this.post&&this.post.Group&&this.post.Group.configuration&&this.post.Group.configuration.alternativePointAgainstLabel?this.set("labelDown",this.post.Group.configuration.alternativePointAgainstLabel):this.set("labelDown",this.t("point.against")))},removeElementsByClass:function(t,e){for(var i=t.getElementsByClassName(e);i.length>0;)i[0].parentNode.removeChild(i[0])},_response:function(t,e){var i=this._preProcessPoints(e.response);if(this.removeElementsByClass(this,"inserted-outside-list"),i.length>0){for(var o=[],n=[],s=0;s<i.length;s++)i[s].value>0?o.push(i[s]):i[s].value<0&&n.push(i[s]);this.set("upPoints",o),this.set("downPoints",n)}else this.set("upPoints",[]),this.set("downPoints",[]),this.set("points",[]);this.largeMode||this.set("points",this.interleaveArrays(this.upPoints,this.downPoints)),this._updateCounterInfo(),this._scrollPointIntoView()},_scrollToIdChanged:function(t){t&&this._scrollPointIntoView()},interleaveArrays:function(t,e){for(var i=[t,e],o=Math.max.apply(Math,i.map(function(t){return t.length})),n=[],s=0;s<o;++s)i.forEach(function(t){t.length>s&&n.push(t[s])});return n},_scrollPointIntoView:function(){this.points&&this.points.length>0&&this.scrollToId&&this.async(function(){var t=this.$$("#point"+this.scrollToId);console.log("Looking for point"),t&&(console.log("Scrolling to point"),t.scrollIntoView(),this.set("scrollToId",null),t.elevation=5,this.async(function(){t.elevation=1}.bind(this),1e4))}.bind(this),200)},_preProcessPoints:function(t){for(var e=0;e<t.length;e++)(!this.latestPointCreatedAt||!this.latestPointCreatedAt||t[e].created_at>this.latestPointCreatedAt)&&this.set("latestPointCreatedAt",t[e].created_at),t[e].latestContent=t[e].PointRevisions[t[e].PointRevisions.length-1].content;return t},_updateCounterInfo:function(){this.largeMode?this.fire("yp-debate-info",{count:this.upPoints.length+this.downPoints.length,firstPoint:this.upPoints[0]}):this.fire("yp-debate-info",{count:this.points.length,firstPoint:this.points[0]})},_insertNewPoint:function(t){this.largeMode?t.value>0?this.unshift("upPoints",t):t.value<0&&this.unshift("downPoints",t):this.unshift("points",t)},_newPointResponse:function(t,e){if(this.currentVideoId){var i=this._preProcessPoints([e.response])[0],o=document.createElement("iron-ajax");o.handleAs="json",o.contentType="application/json",o.url="/api/videos/"+i.id+"/completeAndAddToPoint",o.method="PUT",o.body={videoId:this.currentVideoId},o.addEventListener("response",function(t,e){this._completeNewPointResponse(t,t.detail)}.bind(this)),o.generateRequest()}else this._completeNewPointResponse(t,e)},_completeNewPointResponse:function(t,e){this.set("addPointDisabled",!1);var i=this._preProcessPoints([e.response])[0];i.value>0?(this.newPointTextCombined=this.t("point.forAdded")+" "+this.truncate(i.content,21),this.set("textValueUp","")):(this.newPointTextCombined=this.t("point.againstAdded")+" "+this.truncate(i.content,21),this.set("textValueDown","")),this.set("textValueMobileUpOrDown",""),this._insertNewPoint(i),this.set("post.counter_points",this.post.counter_points+1),this.$.newPointToast.show(),this._updateCounterInfo(),i.value>0?window.appGlobals.activity("completed","newPointFor"):window.appGlobals.activity("completed","newPointAgainst"),this._clearVideo()},addPointUp:function(){this.addPoint(this.textValueUp,1,this.uploadedVideoUpId?this.uploadedVideoUpId:null),window.appGlobals.activity("add","pointUp")},addPointDown:function(){this.addPoint(this.textValueDown,-1,this.uploadedVideoDownId?this.uploadedVideoDownId:null),window.appGlobals.activity("add","pointDown")},addMobilePointUpOrDown:function(){"pointFor"==this.pointUpOrDownSelected?(this.addPoint(this.textValueMobileUpOrDown,1,this.uploadedVideoMobileId?this.uploadedVideoMobileId:null),window.appGlobals.activity("add","pointUp")):"pointAgainst"==this.pointUpOrDownSelected&&(this.addPoint(this.textValueMobileUpOrDown,-1,this.uploadedVideoMobileId?this.uploadedVideoMobileId:null),window.appGlobals.activity("add","pointDown"))},addPoint:function(t,e,i){!0===window.appUser.loggedIn()?(this.$.newPointAjax.url="/api/points/"+this.post.group_id,this.$.newPointAjax.body={postId:this.post.id,content:t,value:e},this.$.newPointAjax.generateRequest(),this.set("addPointDisabled",!0),this.set("currentVideoId",i)):window.appUser.loginForNewPoint(this,{content:t,value:e})},focusUpPoint:function(){window.appGlobals.activity("focus","pointUp")},focusDownPoint:function(){window.appGlobals.activity("focus","pointDown")},focusTextArea:function(t){t.currentTarget.parentElement.elevation=3},blurTextArea:function(t){t.currentTarget.parentElement.elevation=1},ifLengthIsRight:function(t,e,i){return null!=i?("up"===t&&this.set("hideUpVideo",!1),"down"===t&&this.set("hideDownVideo",!1),"mobile"===t&&this.set("hideMobileVideo",!1),!0):null!=e&&0===e.length?("up"===t&&this.set("hideUpVideo",!1),"down"===t&&this.set("hideDownVideo",!1),"mobile"===t&&this.set("hideMobileVideo",!1),!1):null!=e&&e.length>0?("up"===t&&this.set("hideUpVideo",!0),"down"===t&&this.set("hideDownVideo",!0),"mobile"===t&&this.set("hideMobileVideo",!0),!0):null!=e&&e.length>1}});</script></dom-module><dom-module id="yp-post-user-image-card"><template><style include="iron-flex iron-flex-alignment">.description{padding-left:16px;padding-right:16px;padding-top:16px;color:#444}.photographer{padding-left:16px;padding-right:16px;padding-top:8px;color:#aaa}paper-material{width:800px;height:100%;background-color:#FFF;padding:0}iron-image{width:800px;height:600px}@media (max-width:800px){iron-image{width:600px;height:450px}paper-material{width:600px}}@media (max-width:620px){iron-image{width:400px;height:300px}paper-material{width:400px}}@media (max-width:420px){iron-image{width:320px;height:240px}paper-material{width:320px}.commentsList{margin-left:16px}}.commentsList{margin-left:32px}[hidden]{display:none!important}</style><paper-material elevation="2" class="layout vertical"><iron-image title$="[[image.description]]" sizing="cover" src$="[[_imageUrl(image)]]"></iron-image><div class="description">[[image.description]]</div><div class="layout horizontal" style="width:100%"><div class="photographer">[[image.photographer_name]]</div><div class="editMenu layout horizontal flex end-justified" hidden$="[[!hasImageAccess(image, post)]]"><paper-icon-button icon="create" on-tap="_openEdit"></paper-icon-button><paper-icon-button icon="clear" on-tap="_openDelete"></paper-icon-button></div></div><yp-point-comment-list class="commentsList" image="[[image]]"></yp-point-comment-list></paper-material></template><script>Polymer({is:"yp-post-user-image-card",behaviors:[Polymer.ypLanguageBehavior,Polymer.AccessHelpers,Polymer.ypMediaFormatsBehavior],properties:{image:{type:Object},post:{type:Object}},_openEdit:function(){window.appGlobals.activity("open","userImage.edit"),Polymer.dom(document).querySelector("yp-app").getDialogAsync("userImageEdit",function(e){e.setup(this.post,this.image,!1,this._refresh.bind(this)),e.open("edit",{postId:this.post.id,userImages:!0})}.bind(this))},_openDelete:function(){window.appGlobals.activity("open","userImage.delete"),Polymer.dom(document).querySelector("yp-app").getDialogAsync("apiActionDialog",function(e){e.setup("/api/images/"+this.post.id+"/"+this.image.id+"/user_images",this.t("userImage.deleteConfirmation"),this._refresh.bind(this)),e.open()}.bind(this))},_refresh:function(){this.fire("refresh")},_imageUrl:function(e){return this.getImageFormatUrl([e],0)}});</script></dom-module><dom-module id="yp-post-user-images"><template><style include="iron-flex iron-flex-alignment">paper-button{margin-top:32px;margin-bottom:8px;background-color:var(--accent-color);color:#FFF;width:242px}yp-post-user-image-card{margin-top:32px;margin-bottom:32px}</style><lite-signal on-lite-signal-yp-language="_languageEvent"></lite-signal><div class="layout vertical center-center"><template is="dom-if" if="[[post]]"><paper-button raised="" on-tap="_newImage">[[t('posts.newUserImage')]]</paper-button><template is="dom-if" if="[[images]]"><template is="dom-repeat" items="[[images]]" as="image"><yp-post-user-image-card post="[[post]]" image="[[image]]" on-refresh="_refresh"></yp-post-user-image-card></template></template></template><div class="layout horizontal center-center"><yp-ajax id="ajax" on-response="_response"></yp-ajax></div></div></template><script>Polymer({is:"yp-post-user-images",behaviors:[Polymer.ypLanguageBehavior],properties:{images:{type:Array,value:null},post:{type:Object,observer:"_postChanged"}},_refresh:function(){this.$.ajax.generateRequest()},_postChanged:function(e){e&&(this.$.ajax.url="/api/images/"+e.id+"/user_images",this.$.ajax.generateRequest())},_newImage:function(){window.appGlobals.activity("open","newUserImage"),Polymer.dom(document).querySelector("yp-app").getDialogAsync("userImageEdit",function(e){e.setup(this.post,null,!0,this._refresh.bind(this)),e.open("new",{postId:this.post.id,userImages:!0})}.bind(this))},_response:function(e,s){this.set("images",s.response),this.images&&this.images.length>0?this.fire("yp-post-image-count",this.images.length):this.fire("yp-post-image-count",0)}});</script></dom-module></div><dom-module id="yp-post"><template><style include="iron-flex iron-flex-alignment">.container{padding-top:0;margin-top:-70px;height:100%}.flex{@apply --layout-vertical;@apply --layout-flex;}.centerContainer{@apply --layout-center-center;}.postHeader{padding:16px;background-color:#fefefe;width:940px}.statusHeader{padding:16px;background-color:#fefefe;width:940px;margin-top:16px;height:48px}.description{width:510px;padding-left:24px}ac-activities{padding-top:8px}.statusColumn{width:670px;padding-bottom:16px}.mainPage{background-color:#FFF}yp-post-user-images{padding-top:32px}@media (max-width:961px){.postHeader{width:600px}}@media (max-width:600px){.postHeader{width:400px}}.createFab{position:fixed;bottom:24px;right:28px;background-color:var(--accent-color);color:#FFF;--paper-fab-iron-icon:{color:var(--icon-general-color,#FFF);height:40px;width:40px};}.createFab[wide-layout]{width:72px;height:72px;--paper-fab-iron-icon:{color:var(--icon-general-color,#FFF);width:72px;height:72px};}@media (max-width:360px){.centerContainer{@apply --layout-vertical;}.postHeader{height:100%;width:360px;padding:0}.tabsMaterial{width:360px}.statusHeader{width:360px;height:120px;padding:0;padding-left:20px}.statusColumn{height:60px;padding:0}.description{width:320px;padding:8px;padding-left:20px;padding-bottom:16px}.statusColumn{width:320px}paper-tab{font-size:14px}}yp-ajax{background-color:var(--primary-background-color)}.mapContainer{margin:24px;width:960px;height:500px}.counterInfo{font-size:11px}.topContainer{margin-top:16px}.tabs{margin-top:24px}@media (max-width:934px){.mapContainer{margin:16px;width:800px;height:400px}}@media (max-width:832px){.mapContainer{margin:8px;width:600px;height:340px}}@media (max-width:632px){.mapContainer{margin:8px;width:400px;height:300px}}@media (max-width:420px){.mapContainer{margin:8px;width:330px;height:250px}}@media (max-width:360px){.mapContainer{margin:8px;width:280px;height:200px}}.tabs{width:1100px;padding-top:8px;padding-bottom:8px}.tabs .tab{width:250px}@media (max-width:1024px){.tabs{max-width:920px}.tabs .tab{width:200px}}@media (max-width:900px){.tabs{max-width:450px;font-size:13px!important;word-wrap:break-word!important;margin-top:16px}.tabs .tab{width:120px;word-wrap:break-word!important}.topArea{height:300px}.topArea[is-post]{min-height:470px}}@media (max-width:380px){.tabs{max-width:330px;font-size:10px!important}paper-tab{width:100px;font-size:10px!important}.topArea[is-post]{min-height:530px}ac-activities{min-height:600px!important}}.minHeightSection{min-height:450px}[hidden]{display:none!important}</style><div class="topContainer layout vertical center-center" is-post="" create-fab-title="[[t('point.add')]]" on-yp-create-fab-tap="_newPoint"><yp-post-header id="postCard" class="largeCard" post="[[post]]" on-refresh="_refreshAjax" header-mode=""></yp-post-header><div class="layout horizontal center-center" hidden$="[[post.Group.configuration.hideAllTabs]]"><paper-tabs id="paper_tabs" class="tabs" selected="{{selectedTab}}" attr-for-selected="name" focused=""><paper-tab name="debate"><div class="layout vertical center-center tabCounterContainer"><span>[[t('post.tabs.debate')]]</span><div class="counterInfo" id="tabCountDebate"></div></div></paper-tab><paper-tab name="news">[[t('post.tabs.news')]]</paper-tab><paper-tab name="location" hidden$="[[locationHidden]]">[[t('post.tabs.location')]]</paper-tab><paper-tab name="photos"><div class="layout vertical center-center tabCounterContainer"><span>[[t('post.tabs.photos')]]</span><div class="counterInfo" id="tabCountPhotos"></div></div></paper-tab></paper-tabs></div><iron-pages id="pages" class="tabPages" selected="[[selectedTab]]" attr-for-selected="name" entry-animation="fade-in-animation" exit-animation="fade-out-animation"><div name="debate" class="layout horizontal center-center"><yp-post-points host="[[host]]" id="pointsSection" post="[[post]]" scroll-to-id$="[[scrollToPointId]]"></yp-post-points></div><section name="news" class="minHeightSection"><template is="dom-if" if="[[newsTabSelected]]"><ac-activities id="postNews" selected-tab="[[selectedTab]]" disable-new-posts="[[disableNewPosts]]" post-group-id="[[post.group_id]]" post-id="[[post.id]]"></ac-activities></template></section><section name="photos" class="minHeightSection"><div class="layout vertical flex"><div class="layout horizontal center-center"><yp-post-user-images post="[[post]]"></yp-post-user-images></div></div></section></iron-pages></div><div class="layout vertical config"><paper-checkbox name="i_was_here" checked$="{{post.i_was_here}}">[[t('group.i_was_here')]]</paper-checkbox></div><lite-signal on-lite-signal-yp-language="_languageEvent"></lite-signal><app-route route="{{idRoute}}" pattern="/:id" data="{{idRouteData}}" tail="{{tabRoute}}"></app-route><app-route route="{{tabRoute}}" pattern="/:tabName" data="{{tabRouteData}}"></app-route><iron-media-query query="(min-width: 1024px)" query-matches="{{wideWidth}}"></iron-media-query><div class="create-fab-wrapper layout horizontal end-justified createFabContainer" hidden$="[[post.Group.configuration.hideNewPostOnPostPage]]"><template is="dom-if" if="[[!disableNewPosts]]"><paper-fab class="createFab" icon="[[createFabIcon]]" elevation="5" wide-layout$="{{wideWidth}}" title="[[createFabTitle]]" on-tap="_newPost"></paper-fab></template></div><div class="layout horizontal center-center"><yp-ajax id="ajax" on-response="_response"></yp-ajax><yp-ajax id="pagesAjax" on-response="_pagesResponse"></yp-ajax></div></template><script>Polymer({is:"yp-post",behaviors:[Polymer.ypLanguageBehavior,Polymer.ypThemeBehavior,Polymer.YpNewsTabSelected,Polymer.ypGotoBehavior,Polymer.ypMediaFormatsBehavior,Polymer.ypNumberFormatBehavior,Polymer.ypTruncateBehavior],properties:{idRoute:Object,tabRoute:Object,idRouteData:Object,tabRouteData:Object,postId:{type:Number,value:null,observer:"_postIdChanged"},host:String,post:{type:Object,value:null,notify:!0,observer:"_postChanged"},selectedTab:{type:String,value:"debate",observer:"_selectedTabChanged"},small:{type:Boolean},method:{type:String},mapActive:{type:Boolean,value:!1},wideWidth:{type:Boolean,value:!1},createFabIcon:{type:String,value:"lightbulb-outline"},disableNewPosts:{type:Boolean,value:!1},scrollToPointId:{type:String,value:null},locationHidden:{type:Boolean,value:!1}},observers:["_routeIdChanged(idRouteData.id)","_routeTabChanged(tabRouteData.tabName)"],_routeIdChanged:function(t){t&&this.set("postId",t)},_routeTabChanged:function(t){t&&!this._isNumber(t)?this.set("selectedTab",t):t&&this._isNumber(t)&&(this.set("scrollToPointId",t),this.set("selectedTab","debate"))},_isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},_selectedTabChanged:function(t){this.post&&this.redirectTo("/post/"+this.post.id+"/"+t),"location"==t?this.set("mapActive",!0):this.set("mapActive",!1),t&&window.appGlobals&&window.appGlobals.activity("open","post_tab_"+t),this.async(function(){var t=this.$$("#postNews");t&&t.fireResize()},300)},_newPost:function(){window.appGlobals.activity("open","newPost"),Polymer.dom(document).querySelector("yp-app").getDialogAsync("postEdit",function(t){t.setup(null,!0,null),t.open("new",{groupId:this.post.Group.id,group:this.post.Group})}.bind(this))},listeners:{"yp-debate-info":"_updateDebateInfo","yp-post-image-count":"_updatePostImageCount"},_updatePostImageCount:function(t,o){var e=this.$$("#tabCountPhotos");e&&(e.innerHTML=this.formatNumber(o))},_updateDebateInfo:function(t,o){var e=this.$$("#tabCountDebate");e&&(e.innerHTML=this.formatNumber(o.count)),o.firstPoint&&this.$.postCard.updateDescriptionIfEmpty(o.firstPoint.content)},_mainContainerClasses:function(t){return t?"layout horizontal wrap":"layout horizontal center-center"},_headerClasses:function(t){return t?"layout vertical postHeader wrap":"layout horizontal postHeader"},postName:function(t){return t&&t.name?this.truncate(this.trim(t.name),200):t?t.short_name:void 0},postDescription:function(t){return t&&t.description?this.truncate(this.trim(t.description),1e4,"..."):""},_refreshAjax:function(){this.$.ajax.generateRequest()},_postChanged:function(t,o){},_postIdChanged:function(t,o){this.set("post",null),t&&(this._getPost(),this.set("selectedTab","debate"))},_pagesResponse:function(t,o){this.fire("yp-set-pages",o.response)},_getPost:function(){this.host?this.$.ajax.url=this.host+"/api/posts/"+this.postId:this.$.ajax.url="/api/posts/"+this.postId,this.$$("#ajax").retryMethodAfter401Login=this._getPost.bind(this),this.$.ajax.generateRequest()},_response:function(t,o,e){this.set("post",o.response),this.refresh(),this.post.Group.configuration&&void 0!=this.post.Group.configuration.canAddNewPosts?!0===this.post.Group.configuration.canAddNewPosts?this.set("disableNewPosts",!1):this.set("disableNewPosts",!0):this.set("disableNewPosts",!1),null===this.post.description&&(this.post.description=this.post.Points[0].content,this.post.Points.shift())},refresh:function(){this.post&&(null!=this.post.Group.theme_id?this.setTheme(this.post.Group.theme_id):this.post.Group.Community&&null!=this.post.Group.Community.theme_id&&this.setTheme(this.post.Group.Community.theme_id),window.appGlobals&&(window.appGlobals.setCommunityAnalyticsTracker(this.post.Group.Community.google_analytics_code),this.post.Group.Community.configuration&&window.appGlobals.setCommunityPixelTracker(this.post.Group.Community.configuration.facebookPixelId),window.appGlobals.setAnonymousGroupStatus(this.post.Group)),this.post.Group.configuration&&null!=this.post.Group.configuration.defaultLocale&&window.appGlobals.changeLocaleIfNeeded(this.post.Group.configuration.defaultLocale),this.post.Group.configuration&&void 0!=this.post.Group.configuration.locationHidden?this.set("locationHidden",this.post.Group.configuration.locationHidden):this.set("locationHidden",!1),this.fire("change-header",{headerTitle:this.truncate(this.post.Group.name,80),documentTitle:this.post.name,headerDescription:"",backPath:"/group/"+this.post.group_id,hideHelpIcon:!(!this.post.Group.configuration||!this.post.Group.configuration.hideHelpIcon)||null}),this.$.pagesAjax.url="/api/groups/"+this.post.Group.id+"/pages",this.$.pagesAjax.generateRequest(),this.post.Group.configuration&&!0===this.post.Group.configuration.disableFacebookLoginForGroup?window.appGlobals.disableFacebookLoginForGroup=!0:window.appGlobals.disableFacebookLoginForGroup=!1,this.fire("yp-set-home-link",{type:"group",id:this.post.Group.id,name:this.post.Group.name}),this.post.Group&&this.post.Group.Community&&this.post.Group.Community.configuration&&this.post.Group.Community.configuration.signupTermsPageId&&-1!=this.post.Group.Community.configuration.signupTermsPageId?window.appGlobals.signupTermsPageId=this.post.Group.Community.configuration.signupTermsPageId:window.appGlobals.signupTermsPageId=null,this.post.Group.configuration&&this.post.Group.configuration.forceSecureSamlLogin?window.appGlobals.currentGroupForceSaml=!0:window.appGlobals.currentGroupForceSaml=!1)},setupTopHeaderImage:function(t){var o="url("+this.getImageFormatUrl(t,0)+")";this.updateStyles({"--top-area-background-image":o})},computeUrl:function(t){return"/api/posts/"+t}});</script></dom-module>