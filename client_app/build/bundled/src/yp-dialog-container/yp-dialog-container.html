<link rel="import" href="../../bower_components/polymer/polymer.html?v=8.0.0-4"><link rel="import" href="../../bower_components/lite-signal/lite-signal.html?v=8.0.0-4"><link rel="import" href="../../bower_components/iron-lazy-pages/iron-lazy-pages.html?v=8.0.0-4"><link rel="import" href="../yp-ajax/yp-ajax-error-dialog.html?v=8.0.0-4"><link rel="import" href="../yp-user/yp-login.html?v=8.0.0-4"><link rel="import" href="../yp-user/yp-missing-email.html?v=8.0.0-4"><link rel="import" href="../yp-user/yp-forgot-password.html?v=8.0.0-4"><link rel="import" href="../yp-user/yp-reset-password.html?v=8.0.0-4"><link rel="import" href="../yp-page/yp-page-dialog.html?v=8.0.0-4"><link rel="import" href="../yp-user/yp-accept-invite.html?v=8.0.0-4"><link rel="import" href="../yp-behaviors/yp-got-admin-rights-behavior.html?v=8.0.0-4"><link rel="import" href="../yp-behaviors/yp-logged-in-user-behavior.html?v=8.0.0-4"><dom-module id="yp-dialog-container"><template><style include="iron-flex iron-flex-alignment">:host{background-color:var(--primary-background-color)}#dialogs{background-color:var(--primary-background-color)!important}#dialogs[hide]{display:none}paper-dialog{background-color:#FFF}</style><lite-signal on-lite-signal-got-admin-rights="_gotAdminRights"></lite-signal><lite-signal on-lite-signal-logged-in="_loggedInUser"></lite-signal><lite-signal on-lite-signal-open-bulk-status-updates="_openBulkStatusUpdates"></lite-signal><div id="dialogs" hide$="[[hideDialogs]]"><paper-toast id="masterToast"></paper-toast><yp-ajax-error-dialog id="errorDialog"></yp-ajax-error-dialog><template is="dom-if" if="[[pageDialogOpen]]" restamp=""><yp-page-dialog id="pageDialog"></yp-page-dialog></template><iron-lazy-pages selected="{{selectedDialog}}" attr-for-selected="name"><template is="dom-if" name="userLogin" restamp=""><yp-login id="userLogin" on-yp-forgot-password="_forgotPassword"></yp-login></template><template is="dom-if" name="forgotPassword" restamp=""><yp-forgot-password id="forgotPassword"></yp-forgot-password></template><template is="dom-if" name="resetPassword" restamp=""><yp-reset-password id="resetPassword"></yp-reset-password></template><template is="dom-if" name="acceptInvite" restamp=""><yp-accept-invite id="acceptInvite"></yp-accept-invite></template><template is="dom-if" name="missingEmail" restamp=""><yp-missing-email id="missingEmail"></yp-missing-email></template><template is="dom-if" name="communityEdit" restamp=""><yp-community-edit id="communityEdit"></yp-community-edit></template><template is="dom-if" name="groupEdit" restamp=""><yp-group-edit new="" id="groupEdit"></yp-group-edit></template><template is="dom-if" name="postEdit" restamp=""><yp-post-edit id="postEdit"></yp-post-edit></template><template is="dom-if" name="userImageEdit" restamp=""><yp-post-user-image-edit id="userImageEdit"></yp-post-user-image-edit></template><template is="dom-if" name="magicTextDialog" restamp=""><yp-magic-text-dialog id="magicTextDialog"></yp-magic-text-dialog></template><template is="dom-if" name="apiActionDialog" restamp=""><yp-api-action-dialog id="apiActionDialog"></yp-api-action-dialog></template><template is="dom-if" name="userEdit" restamp=""><yp-user-edit id="userEdit" method="PUT"></yp-user-edit></template><template is="dom-if" name="userDeleteOrAnonymize" restamp=""><yp-user-delete-or-anonymize id="userDeleteOrAnonymize"></yp-user-delete-or-anonymize></template><template is="dom-if" name="confirmationDialog" restamp=""><yp-confirmation-dialog id="confirmationDialog"></yp-confirmation-dialog></template><template is="dom-if" name="notificationToast" restamp=""><ac-notification-toast id="notificationToast"></ac-notification-toast></template><template is="dom-if" name="categoryEdit" restamp=""><yp-category-edit new="" id="categoryEdit"></yp-category-edit></template><template is="dom-if" name="pagesGrid" restamp=""><yp-pages-grid id="pagesGrid"></yp-pages-grid></template><template is="dom-if" name="organizationsGrid" restamp=""><yp-organizations-grid id="organizationsGrid"></yp-organizations-grid></template><template is="dom-if" name="organizationEdit" restamp=""><yp-organization-edit id="organizationEdit"></yp-organization-edit></template><template is="dom-if" name="domainEdit" restamp=""><yp-domain-edit id="domainEdit"></yp-domain-edit></template><template is="dom-if" name="postStatusChangeEdit" restamp=""><yp-post-status-change-edit id="postStatusChangeEdit"></yp-post-status-change-edit></template><template is="dom-if" name="postMove" restamp=""><yp-post-move id="postMove"></yp-post-move></template><template is="dom-if" name="none" restamp=""></template></iron-lazy-pages><template is="dom-if" if="[[bulkStatusUpdates]]"><yp-bulk-status-update-config id="bulkStatusUpdateConfig"></yp-bulk-status-update-config><yp-bulk-status-update-grid id="bulkStatusUpdateGrid"></yp-bulk-status-update-grid><yp-bulk-status-update-edit id="bulkStatusUpdateEdit"></yp-bulk-status-update-edit><yp-bulk-status-update-templates id="bulkStatusUpdateEditTemplates"></yp-bulk-status-update-templates></template><template is="dom-if" if="[[gotUsersGrid]]"><yp-users-grid id="usersGrid"></yp-users-grid></template></div><paper-dialog id="loadingDialog"><paper-spinner active=""></paper-spinner></paper-dialog></template><script>Polymer({is:"yp-dialog-container",behaviors:[Polymer.ypLoggedInUserBehavior,Polymer.ypGotAdminRightsBehavior],properties:{waitForUpgradeCounter:{type:Number,value:0},bulkStatusUpdates:{type:Boolean,value:!1},hideDialogs:{type:Boolean,value:!0},haveLoadedDelayed:{type:Boolean,value:!1},loadingStartedLoggedIn:{type:Boolean,value:!1},loadingStartedAdmin:{type:Boolean,value:!1},selectedDialog:{type:String,value:null},pageDialogOpen:{type:Boolean,value:!1},gotUsersGrid:{type:Boolean,value:!1}},ready:function(){this.async(function(){this.importHref(this.resolveUrl("yp-dialog-container-delayed.html?v=8.0.0-4"),function(){this.set("haveLoadedDelayed",!0)},null,!0)})},_loggedInUser:function(o,e){console.info("_loggedInUser"),e&&(this.set("loggedInUser",e),this.loadingStartedLoggedIn?console.error("Trying to load logged in twice"):(this.loadingStartedLoggedIn=!0,this.importHref(this.resolveUrl("yp-dialog-container-logged-in.html?v=8.0.0-4"),function(){console.info("Have loaded logged-in container")},null,!0)))},_gotAdminRights:function(o,e){console.info("_gotAdminRights"),e&&e>0&&(this.set("gotAdminRights",!0),this.loadingStartedAdmin?console.error("Trying to load logged in twice"):(this.loadingStartedAdmin=!0,this.importHref(this.resolveUrl("yp-dialog-container-admin.html?v=8.0.0-4"),function(){console.info("Have loaded admin container")},null,!0)))},_openBulkStatusUpdates:function(){this.$.loadingDialog.open(),this.importHref(this.resolveUrl("yp-dialog-container-bulk-status-updates.html?v=8.0.0-4"),function(){this.$.loadingDialog.close(),console.info("Have loaded bulk status container")}.bind(this),null,!0),this.set("bulkStatusUpdates",!0)},closeDialog:function(o){var e=this.$$("#"+o);e?(console.info("Closing dialog: "+o),e.close()):console.error("Did not find dialog to close: "+o)},dialogClosed:function(o){o.name===this.selectedDialog&&(this.set("selectedDialog","none"),console.log("Setting selectedDialog to none"))},getUsersGridAsync:function(o){this.$.loadingDialog.open(),this.importHref(this.resolveUrl("yp-dialog-container-users-grid.html?v=8.0.0-4"),function(){this.$.loadingDialog.close(),console.info("Have loaded users grid container"),this.set("gotUsersGrid",!0),this.getDialogAsync("usersGrid",o)}.bind(this),null,!0)},getDialogAsync:function(o,e){this.set("hideDialogs",!1),"pageDialog"===o?this.set("pageDialogOpen",!0):(this.set("pageDialogOpen",!1),this.set("selectedDialog",o)),this.async(function(){var t=this.$$("#"+o);t&&"function"==typeof t.ready?(this.set("waitForUpgradeCounter",0),console.info("Found dialog: "+o),e(t)):(console.warn("Element not upgraded: "+o),this.waitForUpgradeCounter+=1,this.waitForUpgradeCounter>100&&console.error("Element not upgraded after wait: "+o),this.async(function(){this.getDialogAsync(o,e)}.bind(this),this.waitForUpgradeCounter>100?1e3:250))})},_forgotPassword:function(){this.getDialogAsync("forgotPassword",function(o){o.open()})}});</script></dom-module>